
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>time · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.4">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="audio.html" />
    
    
    <link rel="prev" href="app.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">目次</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    はじめに
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">コアライブラリ</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="gfx.html">
            
                <a href="gfx.html">
            
                    
                    gfx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="app.html">
            
                <a href="app.html">
            
                    
                    app
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.3" data-path="time.html">
            
                <a href="time.html">
            
                    
                    time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="audio.html">
            
                <a href="audio.html">
            
                    
                    audio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="fetch.html">
            
                <a href="fetch.html">
            
                    
                    fetch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="args.html">
            
                <a href="args.html">
            
                    
                    args
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="glue.html">
            
                <a href="glue.html">
            
                    
                    glue
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">ユーティリティ</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="imgui.html">
            
                <a href="imgui.html">
            
                    
                    imgui
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="nuklear.html">
            
                <a href="nuklear.html">
            
                    
                    nuklear
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="gl.html">
            
                <a href="gl.html">
            
                    
                    gl
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="fontstash.html">
            
                <a href="fontstash.html">
            
                    
                    fontstash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="gfx_imgui.html">
            
                <a href="gfx_imgui.html">
            
                    
                    gfx_imgui
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="debugtext.html">
            
                <a href="debugtext.html">
            
                    
                    debugtext
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="memtrack.html">
            
                <a href="memtrack.html">
            
                    
                    memtrack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="shape.html">
            
                <a href="shape.html">
            
                    
                    shape
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="color.html">
            
                <a href="color.html">
            
                    
                    color
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="spine.html">
            
                <a href="spine.html">
            
                    
                    spine
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >time</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="sokoltimeh">sokol_time.h</h1>
<p>シンプルなクロスプラットフォームの時間測定</p>
<p>プロジェクトURL: <a href="https://github.com/floooh/sokol" target="_blank">https://github.com/floooh/sokol</a></p>
<p>このファイルをCまたはC++ファイルにインクルードする前に実装を作成します。</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SOKOL_IMPL</span>
</code></pre>
<p>または</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SOKOL_TIME_IMPL</span>
</code></pre>
<p>オプションとして、以下の定義を独自の実装で提供する:</p>
<ul>
<li>SOKOL_ASSERT(c)     - 独自のアサートマクロ (デフォルト: assert(c))</li>
<li>SOKOL_TIME_API_DECL - 公開関数宣言のプレフィックス (デフォルト: extern)</li>
<li>SOKOL_API_DECL      - SOKOL_TIME_API_DECL と同じ。</li>
<li>SOKOL_API_IMPL      - public 関数実装の接頭辞（デフォルト：-）。</li>
</ul>
<p>sokol_time.hがDLLとしてコンパイルされた場合、宣言または実装を含む前に以下を定義します。:</p>
<ul>
<li>SOKOL_DLL</li>
</ul>
<p>Windowsでは、SOKOL_DLLは必要に応じて、SOKOL_TIME_API_DECLを<strong>declspec(dllexport) または </strong>declspec(dllimport) として定義します。</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">stm_setup</span><span class="hljs-params">()</span></span>;
</code></pre>
<p>sokol_timeを初期化するために他の関数の前に一度だけ呼び出す (これは例えばWindowsのQueryPerformanceFrequencyのように呼び出す)</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">uint64_t</span> <span class="hljs-title">stm_now</span><span class="hljs-params">()</span></span>;
</code></pre>
<p>現在の時刻を不特定の &apos;ticks&apos; 単位で取得する。返される値は、「壁時計」の時間とは関係なく、また特定の時間単位でもなく、時差を計算するためにのみ有用である。</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">uint64_t</span> <span class="hljs-title">stm_diff</span><span class="hljs-params">(<span class="hljs-keyword">uint64_t</span> <span class="hljs-keyword">new</span>, <span class="hljs-keyword">uint64_t</span> old)</span></span>;
</code></pre>
<p>新旧の時間差を計算する。これは常に正の、ゼロでない値を返す。</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">uint64_t</span> <span class="hljs-title">stm_since</span><span class="hljs-params">(<span class="hljs-keyword">uint64_t</span> start)</span></span>;
</code></pre>
<p>現在時刻を取得し、開始からの経過時間を返す (これは &quot;stm_diff(stm_now(), start)&quot; のショートカットである)</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">uint64_t</span> <span class="hljs-title">stm_laptime</span><span class="hljs-params">(<span class="hljs-keyword">uint64_t</span>* last_time)</span></span>;
</code></pre>
<p>これは、フレーム時間やその他の繰り返し発生するイベントの測定に便利である。現在の時刻を受け取り、last_time の値との時間差を返し、次の呼び出しのために last_time に現在の時刻を格納する。last_timeの値が0であれば、戻り値は0になる（これは通常、一番最初の呼び出しで起こる）。</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">uint64_t</span> <span class="hljs-title">stm_round_to_common_refresh_rate</span><span class="hljs-params">(<span class="hljs-keyword">uint64_t</span> duration)</span>
</span></code></pre>
<p>この奇妙な名前の関数は、測定されたフレーム時間を受け取り、最も近い「近くの」一般的なディスプレイのリフレッシュレートのフレーム時間をticksで返します。入力期間がどの一般的なディスプレイのリフレッシュレートにも近いものでない場合、入力期間はフォールバックとして変更されずに返されます。この関数の主な目的は、測定されたフレーム時間からジッター/不正確さを取り除き、代わりにフレーム時間としてディスプレイのリフレッシュレートを使用することです。</p>
<blockquote>
<p>注: より強固なフレームタイミングを得るには、sokol_app.h の関数 sapp_frame_duration() の利用を検討してください。</p>
</blockquote>
<p>ティック単位の継続時間を有用な時間単位に変換するには、以下の関数を使用します:</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">stm_sec</span><span class="hljs-params">(<span class="hljs-keyword">uint64_t</span> ticks)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">stm_ms</span><span class="hljs-params">(<span class="hljs-keyword">uint64_t</span> ticks)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">stm_us</span><span class="hljs-params">(<span class="hljs-keyword">uint64_t</span> ticks)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">stm_ns</span><span class="hljs-params">(<span class="hljs-keyword">uint64_t</span> ticks)</span></span>;
</code></pre>
<p>ティック値を秒、ミリ秒、マイクロ秒、ナノ秒に変換します。すべてのプラットフォームがナノ秒やマイクロ秒の精度を持つわけではないことに注意してください。</p>
<p>ボンネットの中で以下の時間測定機能を使用します。:</p>
<ul>
<li>Windows:        QueryPerformanceFrequency() / QueryPerformanceCounter()</li>
<li>MacOS/iOS:      mach_absolute_time()</li>
<li>emscripten:     emscripten_get_now()</li>
<li>Linux+others:   clock_gettime(CLOCK_MONOTONIC)</li>
</ul>
<h2 id="zliblibpng-license">zlib/libpng license</h2>
<p>Copyright (c) 2018 Andre Weissflog</p>
<p>This software is provided &apos;as-is&apos;, without any express or implied warranty.
In no event will the authors be held liable for any damages arising from the
use of this software.</p>
<p>Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute it
freely, subject to the following restrictions:</p>
<pre><code>1. The origin of this software must not be misrepresented; you must not
claim that you wrote the original software. If you use this software in a
product, an acknowledgment in the product documentation would be
appreciated but is not required.

2. Altered source versions must be plainly marked as such, and must not
be misrepresented as being the original software.

3. This notice may not be removed or altered from any source
distribution.
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="app.html" class="navigation navigation-prev " aria-label="Previous page: app">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="audio.html" class="navigation navigation-next " aria-label="Next page: audio">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"time","level":"2.3","depth":1,"next":{"title":"audio","level":"2.4","depth":1,"path":"audio.md","ref":"audio.md","articles":[]},"previous":{"title":"app","level":"2.2","depth":1,"path":"app.md","ref":"app.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"time.md","mtime":"2022-12-13T22:55:43.564Z","type":"markdown"},"gitbook":{"version":"4.0.4","time":"2022-12-15T06:38:06.519Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

