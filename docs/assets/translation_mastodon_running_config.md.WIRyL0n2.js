import{_ as a,c as e,o,a3 as d}from"./chunks/framework.DflgEAq4.js";const S=JSON.parse('{"title":"環境を設定する","description":"","frontmatter":{},"headers":[],"relativePath":"translation/mastodon/running/config.md","filePath":"translation/mastodon/running/config.md","lastUpdated":1676784496000}'),i={name:"translation/mastodon/running/config.md"},t=d('<h1 id="環境を設定する" tabindex="-1">環境を設定する <a class="header-anchor" href="#環境を設定する" aria-label="Permalink to &quot;環境を設定する&quot;">​</a></h1><p>Mastodonのインストールに必要な環境変数を設定します。</p><p>マストドンは環境変数を設定として使用します。</p><p>便宜上、Mastodon ディレクトリにある <code>.env.production</code> というフラットファイル(&quot;dotenv&quot; ファイルと呼ばれます)から読み込むことができますが、特定のプロセスで常にオーバーライドすることができます。例えば、systemd のサービスファイルは <code>EnvironmentFile</code> や <code>Environment</code> を使ったインライン定義から環境変数を読み込むことができるので、特定のサービスに対して異なる設定パラメータを持たせることができます。また、コマンドラインから Mastodon を呼び出す際にも、環境変数を指定することができる。</p><nav class="table-of-contents"><ul><li><a href="#基本">基本</a><ul><li><a href="#フェデレーションとディスプレイ">フェデレーションとディスプレイ</a></li><li><a href="#シークレット">シークレット</a></li><li><a href="#デプロイ">デプロイ</a></li><li><a href="#スケーリングオプション">スケーリングオプション</a></li></ul></li><li><a href="#バックエンド">バックエンド</a><ul><li><a href="#postgresql">PostgreSQL</a></li><li><a href="#redis">Redis</a></li><li><a href="#エラスティックサーチ">エラスティックサーチ</a></li><li><a href="#statsd">StatsD</a></li><li><a href="#smtpメール配信">SMTPメール配信</a></li></ul></li><li><a href="#ファイルストレージ">ファイルストレージ</a><ul><li><a href="#cdn">CDN</a></li><li><a href="#ローカルファイルストレージ">ローカルファイルストレージ</a></li><li><a href="#amazon-s3および互換性のある">Amazon S3および互換性のある</a></li><li><a href="#swift">Swift</a></li></ul></li><li><a href="#外部認証">外部認証</a><ul><li><a href="#omniauth">OmniAuth</a></li><li><a href="#ldap">LDAP</a></li><li><a href="#pam">PAM</a></li><li><a href="#cas">CAS</a></li><li><a href="#saml">SAML</a></li></ul></li><li><a href="#隠しサービス">隠しサービス</a><ul><li><a href="#tor">TOR</a></li></ul></li><li><a href="#制限事項">制限事項</a><ul><li><a href="#メールドメイン">メールドメイン</a></li><li><a href="#セッション">セッション</a></li><li><a href="#home-feeds">Home feeds</a></li></ul></li><li><a href="#その他">その他</a><ul><li><a href="#dbマイグレーション">DBマイグレーション</a></li><li><a href="#未分類または未分類のもの">未分類または未分類のもの</a></li></ul></li></ul></nav><h2 id="基本" tabindex="-1">基本 <a class="header-anchor" href="#基本" aria-label="Permalink to &quot;基本&quot;">​</a></h2><h3 id="フェデレーションとディスプレイ" tabindex="-1">フェデレーションとディスプレイ <a class="header-anchor" href="#フェデレーションとディスプレイ" aria-label="Permalink to &quot;フェデレーションとディスプレイ&quot;">​</a></h3><h4 id="local-domain" tabindex="-1"><code>LOCAL_DOMAIN</code> <a class="header-anchor" href="#local-domain" aria-label="Permalink to &quot;`LOCAL_DOMAIN`&quot;">​</a></h4><p>これは、ネットワーク内であなたのサーバーを一意に識別するものです。これを変更すると、リモートサーバーが既存のアカウントと全く新しいアカウントを混同してしまうため、後で安全に変更することはできません。これは、あなたがサーバを運用しているドメイン名でなければなりません (プロトコル部分を除いたもの、例えば <code>example.com</code> だけです)。</p><h4 id="web-domain" tabindex="-1"><code>WEB_DOMAIN</code> <a class="header-anchor" href="#web-domain" aria-label="Permalink to &quot;`WEB_DOMAIN`&quot;">​</a></h4><p><code>WEB_DOMAIN</code> はオプションの環境変数で、あるドメインにマストドンをインストールし、ユーザーのハンドルは別のドメインにすることができます。例えば、ユーザーアドレスは <code>@alice@example.com</code> で、マストドンには <code>mastodon.example.com</code> でアクセスすることができます。これは、ドメイン名がすでに別のウェブサイトで使用されているが、見た目が良い、または短いので、マストドンの識別子として使用したい場合に便利です。</p><p><code>LOCAL_DOMAIN</code> と同様に、<code>WEB_DOMAIN</code> は一度設定すると安全に変更することができません。なぜなら、以前の設定を知っているリモートサーバーを混乱させ、彼らとの通信を中断したり信頼性を低下させたりする可能性があるためです。この問題は、リモートサーバーがあなたのアカウントを理解することにあるため、Mastodonを一からインストールし直しても問題は解決しません。従って、<code>LOCAL_DOMAIN</code>と<code>WEB_DOMAIN</code>の設定には細心の注意を払うようにしてください。</p><p>Mastodon を <code>mastodon.example.com</code> にインストールして、 <code>@alice@example.com</code> にサービスを提供できるようにするには、 <code>LOCAL_DOMAIN</code> を <code>example.com</code> に、 <code>WEB_DOMAIN</code> を <code>mastodon.example.com</code> にセットしてください。また、<code>https://example.com/.well-known/webfinger</code> へのリクエストを <code>https://mastodon.example.com/.well-known/webfinger</code> にリダイレクトまたはプロキシするために、<code>example.com</code> をホストするサーバーに追加の設定が必要です。例えば、nginxの場合、以下のような構成になる。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>location /.well-known/webfinger {</span></span>\n<span class="line"><span>  add_header Access-Control-Allow-Origin &#39;*&#39;;</span></span>\n<span class="line"><span>  return 301 https://mastodon.example.com$request_uri;</span></span>\n<span class="line"><span>}</span></span></code></pre></div><h4 id="alternate-domains" tabindex="-1"><code>ALTERNATE_DOMAINS</code> <a class="header-anchor" href="#alternate-domains" aria-label="Permalink to &quot;`ALTERNATE_DOMAINS`&quot;">​</a></h4><p>複数のドメインがMastodonサーバーを指している場合、この設定により、ユーザーが他のドメインを使用してアドレス指定されたときに、Mastodonが自分自身を認識することができます。ドメインはカンマで区切ってください。例：<code>foo.com,bar.com</code>。</p><h4 id="allowed-private-addresses" tabindex="-1"><code>ALLOWED_PRIVATE_ADDRESSES</code> <a class="header-anchor" href="#allowed-private-addresses" aria-label="Permalink to &quot;`ALLOWED_PRIVATE_ADDRESSES`&quot;">​</a></h4><p>送信するHTTPクエリーで許可する特定のアドレス/サブネットをカンマ区切りで指定。</p><h4 id="authorized-fetch" tabindex="-1"><code>AUTHORIZED_FETCH</code> <a class="header-anchor" href="#authorized-fetch" aria-label="Permalink to &quot;`AUTHORIZED_FETCH`&quot;">​</a></h4><p>「セキュアモード」とも呼ばれます。<code>true</code>に設定すると、以下のような変更が行われます。</p><ul><li>Mastodon は公開投稿にリンクされたデータの署名を生成しなくなる。これは、正確な制御ができないまま効率的に再配布されることを防ぐためである。署名付きのリンクデータ・オブジェクトは完全に自己完結しているので、署名の発信元であるサーバーに余計なリクエストをすることなく受け渡しすることができる。</li><li>Mastodonは、通常認証なしで利用できる公開投稿とプロフィールのActivityPub表現に、HTTP署名認証を要求します。プロフィールは、認証が行われない場合、最低限の技術情報のみを返します。</li><li>v4.0.0以前： Mastodonは、REST/ストリーミングAPIにアクセスする際、ユーザーコンテキスト（アクティブユーザーによるOAuth認証画面）を必要とします。</li></ul><p>その結果、認証の仕組みや、自分のサーバーを介さない再配信の仕組みを避けることで、自分のサーバーから公開コンテンツを取得できる人とできない人、例えばドメインをブロックしているサーバーを強制することができるようになります。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>残念ながら、セキュアモードには欠点があり、そのためデフォルトでは有効になっていません。特に、3.0 より古い Mastodon サーバでは、いくつかの機能が壊れてしまいます。また、最新のサーバであっても、公開会話スレッドをより完全なものにするためにリンクデータ署名が使われるため、有用な機能を失ってしまいます。</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>セキュアモードでは、公開された投稿やプロフィールの HTML 表現は隠蔽されません。HTML は、ファーストクラスの ActivityPub 表現や REST API と比べると、よりロッシーなフォーマットですが、それでもコンテンツをスクレイピングするための潜在的なベクトルであることに変わりはありません。</p></div><h4 id="limited-federation-mode" tabindex="-1"><code>LIMITED_FEDERATION_MODE</code> <a class="header-anchor" href="#limited-federation-mode" aria-label="Permalink to &quot;`LIMITED_FEDERATION_MODE`&quot;">​</a></h4><p><code>true</code> に設定すると、Mastodon はフェデレーションを手動で承認したサーバのみに制限し、すべての公開ページと一部の REST API を無効にします。制限付きフェデレーションモードは、セキュアモード (<code>AUTHORIZED_FETCH</code>) に基づいている。</p><p>既存のインスタンスを制限付きフェデレーションモードに切り替える場合、以下のコマンドを使用して、許可されていないドメインに既に存在するデータを削除する必要があります。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tootctl domain purge --limited-federation-mode</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>このモードは、マストドンのミッションである分散化に反して、事実上データサイロを形成してしまうため、学術機関や企業内ネットワークなどの私的利用のみを想定しています。</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>This setting was known as <code>WHITELIST_MODE</code> prior to 3.1.5.</p></div><h4 id="disallow-unauthenticated-api-access" tabindex="-1"><code>DISALLOW_UNAUTHENTICATED_API_ACCESS</code> <a class="header-anchor" href="#disallow-unauthenticated-api-access" aria-label="Permalink to &quot;`DISALLOW_UNAUTHENTICATED_API_ACCESS`&quot;">​</a></h4><p>Mastodon v4.0.0 では、ログアウトしている視聴者であっても、すべてのリクエストのレンダリングにウェブアプリが使用されるようになりました。これらのビューを動作させるために、ウェブアプリはアカウントとステータスを取得するためにパブリックAPIリクエストを行います。これを許可しない場合は、この変数を <code>true</code> に設定してください。認証されていないAPIアクセスを禁止すると、ログアウトしたユーザーに対してプロフィールや投稿のパーマリンクがエラーを返すことになるので、実質的にコンテンツを見るにはローカルでログインするかActivityPub経由で取得するしかないことに注意してください。</p><h4 id="single-user-mode" tabindex="-1"><code>SINGLE_USER_MODE</code> <a class="header-anchor" href="#single-user-mode" aria-label="Permalink to &quot;`SINGLE_USER_MODE`&quot;">​</a></h4><p>true`に設定すると、Mastodonサーバーのフロントページは常にデータベースの最初のプロファイルにリダイレクトされ、登録は無効となります。</p><h4 id="default-locale" tabindex="-1"><code>DEFAULT_LOCALE</code> <a class="header-anchor" href="#default-locale" aria-label="Permalink to &quot;`DEFAULT_LOCALE`&quot;">​</a></h4><p>デフォルトでは、マストドンはブラウザのヘッダーから訪問者の言語を自動的に検出し、その言語でマストドンのインターフェイスを表示します（サポートされている場合）。もし、あなたが言語固有のサーバーや地域的なサーバーを運営している場合、その動作はあなたの言語を話さない訪問者をあなたのサーバーにサインアップさせるように誤解させるかもしれません。このため、この変数を特定の言語に設定するとよいでしょう。</p><p>値の例: <code>de</code></p><p>対応言語</p><ul><li><code>ar</code></li><li><code>ast</code></li><li><code>bg</code></li><li><code>bn</code></li><li><code>br</code></li><li><code>ca</code></li><li><code>co</code></li><li><code>cs</code></li><li><code>cy</code></li><li><code>da</code></li><li><code>de</code></li><li><code>el</code></li><li><code>en</code></li><li><code>eo</code></li><li><code>es</code></li><li><code>es-AR</code></li><li><code>et</code></li><li><code>eu</code></li><li><code>fa</code></li><li><code>fi</code></li><li><code>fr</code></li><li><code>ga</code></li><li><code>gl</code></li><li><code>he</code></li><li><code>hi</code></li><li><code>hr</code></li><li><code>hu</code></li><li><code>hy</code></li><li><code>id</code></li><li><code>io</code></li><li><code>is</code></li><li><code>it</code></li><li><code>ja</code></li><li><code>ka</code></li><li><code>kab</code></li><li><code>kk</code></li><li><code>kn</code></li><li><code>ko</code></li><li><code>lt</code></li><li><code>lv</code></li><li><code>mk</code></li><li><code>ml</code></li><li><code>mr</code></li><li><code>ms</code></li><li><code>nl</code></li><li><code>nn</code></li><li><code>no</code></li><li><code>oc</code></li><li><code>pl</code></li><li><code>pt-BR</code></li><li><code>pt-PT</code></li><li><code>ro</code></li><li><code>ru</code></li><li><code>sk</code></li><li><code>sl</code></li><li><code>sq</code></li><li><code>sr</code></li><li><code>sr-Latn</code></li><li><code>sv</code></li><li><code>ta</code></li><li><code>te</code></li><li><code>th</code></li><li><code>tr</code></li><li><code>uk</code></li><li><code>ur</code></li><li><code>vi</code></li><li><code>zh-CN</code></li><li><code>zh-HK</code></li><li><code>zh-TW</code></li></ul><h3 id="シークレット" tabindex="-1">シークレット <a class="header-anchor" href="#シークレット" aria-label="Permalink to &quot;シークレット&quot;">​</a></h3><h4 id="secret-key-base" tabindex="-1"><code>SECRET_KEY_BASE</code> <a class="header-anchor" href="#secret-key-base" aria-label="Permalink to &quot;`SECRET_KEY_BASE`&quot;">​</a></h4><p><code>rake secret</code>で生成します。これを変更すると、すべてのアクティブなブラウザセッションが壊れます。</p><h4 id="otp-secret" tabindex="-1"><code>OTP_SECRET</code> <a class="header-anchor" href="#otp-secret" aria-label="Permalink to &quot;`OTP_SECRET`&quot;">​</a></h4><p><code>rake secret</code>で生成します。これを変更すると、2要素認証が解除されます。</p><h4 id="vapid-private-key" tabindex="-1"><code>VAPID_PRIVATE_KEY</code> <a class="header-anchor" href="#vapid-private-key" aria-label="Permalink to &quot;`VAPID_PRIVATE_KEY`&quot;">​</a></h4><p>生成には <code>rake mastodon:webpush:generate_vapid_key</code> を使用します。これを変更すると、プッシュ通知が壊れます。</p><h4 id="vapid-public-key" tabindex="-1"><code>VAPID_PUBLIC_KEY</code> <a class="header-anchor" href="#vapid-public-key" aria-label="Permalink to &quot;`VAPID_PUBLIC_KEY`&quot;">​</a></h4><p>生成には <code>rake mastodon:webpush:generate_vapid_key</code> を使用します。これを変更すると、プッシュ通知が壊れます。</p><h3 id="デプロイ" tabindex="-1">デプロイ <a class="header-anchor" href="#デプロイ" aria-label="Permalink to &quot;デプロイ&quot;">​</a></h3><h4 id="rails-env" tabindex="-1"><code>RAILS_ENV</code> <a class="header-anchor" href="#rails-env" aria-label="Permalink to &quot;`RAILS_ENV`&quot;">​</a></h4><p>環境。<code>production</code>, <code>development</code>, または <code>test</code> を指定することができる。開発目的で個人所有のコンピュータで Mastodon を動作させる場合は、 <code>development</code> を使用する。これはデフォルトでもある。オンラインで Mastodon を動作させる場合は、 <code>production</code> を使用する。Mastodon は環境に応じて異なるデフォルトの設定をロードする。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>この変数は、dotenv (<code>.env</code>) ファイルがロードされる前に使用されるため、dotenv ファイルで定義することはできません。</p></div><h4 id="rails-serve-static-files" tabindex="-1"><code>RAILS_SERVE_STATIC_FILES</code> <a class="header-anchor" href="#rails-serve-static-files" aria-label="Permalink to &quot;`RAILS_SERVE_STATIC_FILES`&quot;">​</a></h4><p>true に設定すると、Mastodon は <code>public</code> ディレクトリにあるファイルへのリクエストに応答するようになります。これは、リバースプロキシ (例えば nginx) が、コンテナ環境など <code>public</code> ディレクトリ自体へのファイルシステムのアクセス権を持っていない場合に必要になることがあります。静的ファイルをファイルシステムから直接提供する方が、Ruby on Rails のプロセスを通して提供するよりも常にずっと速いため、これは最適とはいえない設定です。</p><h4 id="rails-log-level" tabindex="-1"><code>RAILS_LOG_LEVEL</code> <a class="header-anchor" href="#rails-log-level" aria-label="Permalink to &quot;`RAILS_LOG_LEVEL`&quot;">​</a></h4><p>Mastodon が生成するログの量を決定する。デフォルトは <code>info</code> で、Mastodon が処理するすべてのリクエストとバックグラウンドジョブについてのログが生成される。これは便利な機能だが、トラフィックやアクティビティが多い場合、ノイズが多くなり、マシンの I/O に負担がかかることがある。そのような場合は、 <code>warn</code> を推奨する。これは、うまくいっていないことについての情報のみを出力し、それ以外は静かにしている。使用できる値は <code>debug</code>、<code>info</code>、<code>warn</code>、<code>error</code>、<code>fatal</code> および <code>unknown</code> である。</p><h4 id="trusted-proxy-ip" tabindex="-1"><code>TRUSTED_PROXY_IP</code> <a class="header-anchor" href="#trusted-proxy-ip" aria-label="Permalink to &quot;`TRUSTED_PROXY_IP`&quot;">​</a></h4><p>Mastodonのウェブおよびストリーミングプロセスに、どのIPが信頼できるリバースプロキシとして機能するかを伝えます（例：nginx、Cloudflare）。Mastodonが各リクエストのソースIPを決定する方法に影響し、重要なレート制限とセキュリティ機能に使用されます。この値が正しく設定されていない場合、マストドンは実際のソースではなく、リバースプロキシのIPを使用する可能性があります。</p><p>デフォルトでは、ループバックアドレスとプライベートネットワークアドレスの範囲が信頼されます。具体的には</p><ul><li><code>127.0.0.1/8</code></li><li><code>::1/128</code></li><li><code>10.0.0.0/8</code></li><li><code>172.16.0.0/12</code></li><li><code>192.168.0.0/16</code></li><li><code>fc00::/7</code></li></ul><p>リバースプロキシが1つで、それがMastodonのウェブやストリーミングのプロセスと同じマシンや同じプライベートネットワークで動作している場合、この設定を変更する必要はなく、デフォルトのままでよいでしょう。また、複数のリバースプロキシサーバーを使用していて、それらがすべてMastodonのウェブおよびストリーミングプロセスと同じプライベートネットワーク内にある場合は、やはりデフォルトのままでよいでしょう。しかし、リバースプロキシサーバーを使用していて、パブリックIPアドレス経由でMastodonのウェブ・ストリーミングサーバーに到達する場合（例えばCloudflareや同様のプロキシを使用している場合）、この変数を設定する必要があります。これは、使用しているすべてのリバースプロキシのIPを、<a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing#CIDR_notation" target="_blank" rel="noreferrer">CIDR表記</a>を使用してIPまたはIP範囲のカンマ区切りリストとして指定する必要があります。この変数が設定されると、(上記の) デフォルトの範囲は信頼されなくなるので、もし外部のリバースプロキシと ローカルホストのプロキシの両方がある場合は、両方の IP (または IP の範囲) を含めなければならないことに注意してください。</p><h4 id="socket" tabindex="-1"><code>SOCKET</code> <a class="header-anchor" href="#socket" aria-label="Permalink to &quot;`SOCKET`&quot;">​</a></h4><p><code>127.0.0.1</code> のような IP アドレスにバインドする代わりに、Unix ソケットにバインドすることができます。この変数は、プロセスごとに異なる値が必要で、ウェブ (Puma) プロセスとストリーミング API (Node.js) プロセスの両方で動作します。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>この変数は、dotenv (<code>.env</code>) ファイルがロードされる前に使用されるため、dotenv ファイルで定義することはできません。</p></div><h4 id="port" tabindex="-1"><code>PORT</code> <a class="header-anchor" href="#port" aria-label="Permalink to &quot;`PORT`&quot;">​</a></h4><p>Unix ソケットを使用していない場合、プロセスがどのポートをリッスンするのかを定義します。この変数はプロセス固有で、例えばプロセスごとに異なる値が必要です。また、ウェブ (Puma) プロセスとストリーミング API (Node.js) プロセスの両方に対して機能します。デフォルトでは、ウェブは <code>3000</code> で、ストリーミング API は <code>4000</code> でリッスンします。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>この変数は、dotenv (<code>.env</code>) ファイルがロードされる前に使用されるため、dotenv ファイルで定義することはできません。</p></div><h4 id="node-env" tabindex="-1"><code>NODE_ENV</code> <a class="header-anchor" href="#node-env" aria-label="Permalink to &quot;`NODE_ENV`&quot;">​</a></h4><p><code>RAILS_ENV</code> と同等であるが、ストリーミング API (Node.js) 用のものである。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>この変数は、dotenv (<code>.env</code>) ファイルがロードされる前に使用されるため、dotenv ファイルで定義することはできません。</p></div><h4 id="bind" tabindex="-1"><code>BIND</code> <a class="header-anchor" href="#bind" aria-label="Permalink to &quot;`BIND`&quot;">​</a></h4><p>Unixソケットを使用していない場合、これはプロセスがバインドするIPを定義します。複数のプロセスが異なるポートでリッスンしている限り、同じIPにバインドすることができます。デフォルトは <code>127.0.0.1</code> です。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>この変数は、dotenv (<code>.env</code>) ファイルがロードされる前に使用されるため、dotenv ファイルで定義することはできません。</p></div><h3 id="スケーリングオプション" tabindex="-1">スケーリングオプション <a class="header-anchor" href="#スケーリングオプション" aria-label="Permalink to &quot;スケーリングオプション&quot;">​</a></h3><h4 id="sidekiq-concurrency" tabindex="-1"><code>SIDEKIQ_CONCURRENCY</code> <a class="header-anchor" href="#sidekiq-concurrency" aria-label="Permalink to &quot;`SIDEKIQ_CONCURRENCY`&quot;">​</a></h4><p>4.1で追加されました。Sidekiqに特化し、この変数はSidekiqがいくつの異なるプロセスにフォークするかを決定します。デフォルトは <code>5</code> です。</p><h4 id="web-concurrency" tabindex="-1"><code>WEB_CONCURRENCY</code> <a class="header-anchor" href="#web-concurrency" aria-label="Permalink to &quot;`WEB_CONCURRENCY`&quot;">​</a></h4><p>Puma 固有のもので、この変数は Puma がいくつの異なるプロセスにフォークするかを決定する。デフォルトは <code>2</code> です。</p><h4 id="max-threads" tabindex="-1"><code>MAX_THREADS</code> <a class="header-anchor" href="#max-threads" aria-label="Permalink to &quot;`MAX_THREADS`&quot;">​</a></h4><p>Puma 固有の変数で、各 Puma プロセスが維持するスレッドの数を決定する。デフォルトは <code>5</code> です。</p><h4 id="persistent-timeout" tabindex="-1"><code>PERSISTENT_TIMEOUT</code> <a class="header-anchor" href="#persistent-timeout" aria-label="Permalink to &quot;`PERSISTENT_TIMEOUT`&quot;">​</a></h4><p>Puma 固有の変数で、Puma が接続を閉じるまでの待ち時間を決定します。デフォルトは <code>20</code> です。</p><h4 id="prepared-statements" tabindex="-1"><code>PREPARED_STATEMENTS</code> <a class="header-anchor" href="#prepared-statements" aria-label="Permalink to &quot;`PREPARED_STATEMENTS`&quot;">​</a></h4><p>デフォルトでは、MastodonはPostgreSQLのプリペアドステートメント機能を使用し、いくつかのパフォーマンス上の利点を提供します。この機能は、トランザクション間で接続を共有するコネクションプールを使用している場合は使用できず、<code>false</code>に設定する必要がある。規模が大きくなると、トランザクションベースのコネクションプールの利点が、プリペアドステートメントによる利点よりも大きくなります。</p><h4 id="streaming-api-base-url" tabindex="-1"><code>STREAMING_API_BASE_URL</code> <a class="header-anchor" href="#streaming-api-base-url" aria-label="Permalink to &quot;`STREAMING_API_BASE_URL`&quot;">​</a></h4><p>ストリーミングAPIは、異なるドメイン／サブドメインに配置することができます。デフォルトの設定では、長時間のストリーミングAPIリクエストはnginxを介してプロキシされるため、これによってストリーミングAPIのパフォーマンスが向上する可能性がある。一方、別のドメイン／サブドメインからストリーミングAPIを提供すれば、nginxを完全にスキップすることができる。</p><p>値の例: <code>wss://streaming.example.com</code>.</p><h4 id="streaming-cluster-num" tabindex="-1"><code>STREAMING_CLUSTER_NUM</code> <a class="header-anchor" href="#streaming-cluster-num" aria-label="Permalink to &quot;`STREAMING_CLUSTER_NUM`&quot;">​</a></h4><p>ストリーミングAPIに特化し、この変数はストリーミングAPIがいくつの異なるプロセスにフォーカスを当てるかを決定する。デフォルトは CPU コアの数から 1 を引いた値である。</p><h2 id="バックエンド" tabindex="-1">バックエンド <a class="header-anchor" href="#バックエンド" aria-label="Permalink to &quot;バックエンド&quot;">​</a></h2><h3 id="postgresql" tabindex="-1">PostgreSQL <a class="header-anchor" href="#postgresql" aria-label="Permalink to &quot;PostgreSQL&quot;">​</a></h3><h4 id="db-host" tabindex="-1"><code>DB_HOST</code> <a class="header-anchor" href="#db-host" aria-label="Permalink to &quot;`DB_HOST`&quot;">​</a></h4><p>デフォルトは <code>localhost</code> です。</p><h4 id="db-user" tabindex="-1"><code>DB_USER</code> <a class="header-anchor" href="#db-user" aria-label="Permalink to &quot;`DB_USER`&quot;">​</a></h4><p>デフォルトは <code>mastodon</code> です。</p><h4 id="db-name" tabindex="-1"><code>DB_NAME</code> <a class="header-anchor" href="#db-name" aria-label="Permalink to &quot;`DB_NAME`&quot;">​</a></h4><p>デフォルトは <code>mastodon_production</code> です。</p><h4 id="db-pass" tabindex="-1"><code>DB_PASS</code> <a class="header-anchor" href="#db-pass" aria-label="Permalink to &quot;`DB_PASS`&quot;">​</a></h4><p>デフォルトなし。</p><h4 id="db-port" tabindex="-1"><code>DB_PORT</code> <a class="header-anchor" href="#db-port" aria-label="Permalink to &quot;`DB_PORT`&quot;">​</a></h4><p>デフォルトは <code>5432</code> です。</p><h4 id="db-pool" tabindex="-1"><code>DB_POOL</code> <a class="header-anchor" href="#db-pool" aria-label="Permalink to &quot;`DB_POOL`&quot;">​</a></h4><p>プロセス内でプールするデータベース接続の数。この値はプロセス内のすべてのスレッドをカバーする必要がある。そのため、デフォルトでは <code>MAX_THREADS</code> の値になる。</p><h4 id="db-sslmode" tabindex="-1"><code>DB_SSLMODE</code> <a class="header-anchor" href="#db-sslmode" aria-label="Permalink to &quot;`DB_SSLMODE`&quot;">​</a></h4><p>Postgresの<a href="https://www.postgresql.org/docs/10/libpq-ssl.html" target="_blank" rel="noreferrer">SSLモード</a>を指定します。デフォルトは <code>prefer</code> です。</p><h4 id="database-url" tabindex="-1"><code>DATABASE_URL</code> <a class="header-anchor" href="#database-url" aria-label="Permalink to &quot;`DATABASE_URL`&quot;">​</a></h4><p>指定した場合は、<code>DB_HOST</code>、<code>DB_USER</code>、<code>DB_NAME</code>、<code>DB_PASS</code> および <code>DB_PORT</code> よりも優先される。</p><p>値の例: <code>postgresql://user:password@localhost:5432</code>.</p><h3 id="redis" tabindex="-1">Redis <a class="header-anchor" href="#redis" aria-label="Permalink to &quot;Redis&quot;">​</a></h3><div class="info custom-block"><p class="custom-block-title">INFO</p><p>揮発性キャッシュのために別のRedisサーバーを使用することが可能です。Redisサーバーに負荷がかかり始めたら、そうするのがよいでしょう。</p></div><h4 id="redis-host" tabindex="-1"><code>REDIS_HOST</code> <a class="header-anchor" href="#redis-host" aria-label="Permalink to &quot;`REDIS_HOST`&quot;">​</a></h4><p>デフォルトは <code>localhost</code> です。</p><h4 id="redis-port" tabindex="-1"><code>REDIS_PORT</code> <a class="header-anchor" href="#redis-port" aria-label="Permalink to &quot;`REDIS_PORT`&quot;">​</a></h4><p>デフォルトは <code>6379</code> である。</p><h4 id="redis-url" tabindex="-1"><code>REDIS_URL</code> <a class="header-anchor" href="#redis-url" aria-label="Permalink to &quot;`REDIS_URL`&quot;">​</a></h4><p>指定された場合、 <code>REDIS_HOST</code> と <code>REDIS_PORT</code> よりも優先される。</p><p>例：<code>redis://user:password@localhost:6379</code>。</p><h4 id="redis-namespace" tabindex="-1"><code>REDIS_NAMESPACE</code> <a class="header-anchor" href="#redis-namespace" aria-label="Permalink to &quot;`REDIS_NAMESPACE`&quot;">​</a></h4><p>指定すると、すべての Redis キーを名前空間化します。これにより、異なるプロジェクトやMastodonサーバー間で同じRedisデータベースを共有することができます。</p><h4 id="cache-redis-host" tabindex="-1"><code>CACHE_REDIS_HOST</code> <a class="header-anchor" href="#cache-redis-host" aria-label="Permalink to &quot;`CACHE_REDIS_HOST`&quot;">​</a></h4><p>デフォルトは <code>REDIS_HOST</code> の値である。</p><h4 id="cache-redis-port" tabindex="-1"><code>CACHE_REDIS_PORT</code> <a class="header-anchor" href="#cache-redis-port" aria-label="Permalink to &quot;`CACHE_REDIS_PORT`&quot;">​</a></h4><p>デフォルトは <code>REDIS_PORT</code> の値である。</p><h4 id="cache-redis-url" tabindex="-1"><code>CACHE_REDIS_URL</code> <a class="header-anchor" href="#cache-redis-url" aria-label="Permalink to &quot;`CACHE_REDIS_URL`&quot;">​</a></h4><p>提供された場合、 <code>CACHE_REDIS_HOST</code> と <code>CACHE_REDIS_PORT</code> よりも優先されます。デフォルトは <code>REDIS_URL</code> の値です。</p><h4 id="cache-redis-namespace" tabindex="-1"><code>CACHE_REDIS_NAMESPACE</code> <a class="header-anchor" href="#cache-redis-namespace" aria-label="Permalink to &quot;`CACHE_REDIS_NAMESPACE`&quot;">​</a></h4><p>デフォルトは <code>REDIS_NAMESPACE</code> の値である。</p><h4 id="sidekiq-redis-url" tabindex="-1"><code>SIDEKIQ_REDIS_URL</code> <a class="header-anchor" href="#sidekiq-redis-url" aria-label="Permalink to &quot;`SIDEKIQ_REDIS_URL`&quot;">​</a></h4><h3 id="エラスティックサーチ" tabindex="-1">エラスティックサーチ <a class="header-anchor" href="#エラスティックサーチ" aria-label="Permalink to &quot;エラスティックサーチ&quot;">​</a></h3><h4 id="es-enabled" tabindex="-1"><code>ES_ENABLED</code> <a class="header-anchor" href="#es-enabled" aria-label="Permalink to &quot;`ES_ENABLED`&quot;">​</a></h4><p>true`に設定すると、Mastodonは検索機能にElasticSearchを使用します。</p><h4 id="es-host" tabindex="-1"><code>ES_HOST</code> <a class="header-anchor" href="#es-host" aria-label="Permalink to &quot;`ES_HOST`&quot;">​</a></h4><p>ElasticSearchサーバーのホスト。デフォルトは <code>localhost</code> です。</p><h4 id="es-port" tabindex="-1"><code>ES_PORT</code> <a class="header-anchor" href="#es-port" aria-label="Permalink to &quot;`ES_PORT`&quot;">​</a></h4><p>ElasticSearchサーバのポート番号。デフォルトは <code>9200</code> です。</p><h4 id="es-user" tabindex="-1"><code>ES_USER</code> <a class="header-anchor" href="#es-user" aria-label="Permalink to &quot;`ES_USER`&quot;">​</a></h4><p>ElasticSearchで任意に認証を行うために使用します。</p><h4 id="es-pass" tabindex="-1"><code>ES_PASS</code> <a class="header-anchor" href="#es-pass" aria-label="Permalink to &quot;`ES_PASS`&quot;">​</a></h4><p>ElasticSearchで任意に認証を行うために使用します。</p><h4 id="es-prefix" tabindex="-1"><code>ES_PREFIX</code> <a class="header-anchor" href="#es-prefix" aria-label="Permalink to &quot;`ES_PREFIX`&quot;">​</a></h4><p>ElasticSearch サーバを複数のプロジェクトや異なる Mastodon サーバで共有する場合に有用です。デフォルトは <code>REDIS_NAMESPACE</code> の値である。</p><h3 id="statsd" tabindex="-1">StatsD <a class="header-anchor" href="#statsd" aria-label="Permalink to &quot;StatsD&quot;">​</a></h3><h4 id="statsd-addr" tabindex="-1"><code>STATSD_ADDR</code> <a class="header-anchor" href="#statsd-addr" aria-label="Permalink to &quot;`STATSD_ADDR`&quot;">​</a></h4><p>この設定を行うと、Mastodonはホスト名とポートで識別されるStatsDインスタンスにいくつかのイベントとメトリックスを記録します。</p><p>値の例：<code>localhost:8125</code>。</p><h4 id="statsd-namespace" tabindex="-1"><code>STATSD_NAMESPACE</code> <a class="header-anchor" href="#statsd-namespace" aria-label="Permalink to &quot;`STATSD_NAMESPACE`&quot;">​</a></h4><p>設定すると、すべての StatsD キーのプレフィックスにこの文字が含まれるようになります。デフォルトは、<code>RAILS_ENV</code> が <code>production</code> の場合は <code>Mastodon.production</code> で、<code>development</code> の場合は <code>Mastodon.development</code> などとなります。</p><h3 id="smtpメール配信" tabindex="-1">SMTPメール配信 <a class="header-anchor" href="#smtpメール配信" aria-label="Permalink to &quot;SMTPメール配信&quot;">​</a></h3><h4 id="smtp-server" tabindex="-1"><code>SMTP_SERVER</code> <a class="header-anchor" href="#smtp-server" aria-label="Permalink to &quot;`SMTP_SERVER`&quot;">​</a></h4><h4 id="smtp-port" tabindex="-1"><code>SMTP_PORT</code> <a class="header-anchor" href="#smtp-port" aria-label="Permalink to &quot;`SMTP_PORT`&quot;">​</a></h4><h4 id="smtp-login" tabindex="-1"><code>SMTP_LOGIN</code> <a class="header-anchor" href="#smtp-login" aria-label="Permalink to &quot;`SMTP_LOGIN`&quot;">​</a></h4><h4 id="smtp-password" tabindex="-1"><code>SMTP_PASSWORD</code> <a class="header-anchor" href="#smtp-password" aria-label="Permalink to &quot;`SMTP_PASSWORD`&quot;">​</a></h4><h4 id="smtp-from-address" tabindex="-1"><code>SMTP_FROM_ADDRESS</code> <a class="header-anchor" href="#smtp-from-address" aria-label="Permalink to &quot;`SMTP_FROM_ADDRESS`&quot;">​</a></h4><h4 id="smtp-domain" tabindex="-1"><code>SMTP_DOMAIN</code> <a class="header-anchor" href="#smtp-domain" aria-label="Permalink to &quot;`SMTP_DOMAIN`&quot;">​</a></h4><h4 id="smtp-delivery-method" tabindex="-1"><code>SMTP_DELIVERY_METHOD</code> <a class="header-anchor" href="#smtp-delivery-method" aria-label="Permalink to &quot;`SMTP_DELIVERY_METHOD`&quot;">​</a></h4><h4 id="smtp-auth-method" tabindex="-1"><code>SMTP_AUTH_METHOD</code> <a class="header-anchor" href="#smtp-auth-method" aria-label="Permalink to &quot;`SMTP_AUTH_METHOD`&quot;">​</a></h4><h4 id="smtp-ca-file" tabindex="-1"><code>SMTP_CA_FILE</code> <a class="header-anchor" href="#smtp-ca-file" aria-label="Permalink to &quot;`SMTP_CA_FILE`&quot;">​</a></h4><h4 id="smtp-openssl-verify-mode" tabindex="-1"><code>SMTP_OPENSSL_VERIFY_MODE</code> <a class="header-anchor" href="#smtp-openssl-verify-mode" aria-label="Permalink to &quot;`SMTP_OPENSSL_VERIFY_MODE`&quot;">​</a></h4><h4 id="smtp-enable-starttls-auto" tabindex="-1"><code>SMTP_ENABLE_STARTTLS_AUTO</code> <a class="header-anchor" href="#smtp-enable-starttls-auto" aria-label="Permalink to &quot;`SMTP_ENABLE_STARTTLS_AUTO`&quot;">​</a></h4><h4 id="smtp-enable-starttls" tabindex="-1"><code>SMTP_ENABLE_STARTTLS</code> <a class="header-anchor" href="#smtp-enable-starttls" aria-label="Permalink to &quot;`SMTP_ENABLE_STARTTLS`&quot;">​</a></h4><p><code>auto</code> (デフォルト)、<code>always</code>、または <code>never</code> に設定する。</p><p><strong>Version history:</strong> 4.0.0 - added</p><h4 id="smtp-tls" tabindex="-1"><code>SMTP_TLS</code> <a class="header-anchor" href="#smtp-tls" aria-label="Permalink to &quot;`SMTP_TLS`&quot;">​</a></h4><h4 id="smtp-ssl" tabindex="-1"><code>SMTP_SSL</code> <a class="header-anchor" href="#smtp-ssl" aria-label="Permalink to &quot;`SMTP_SSL`&quot;">​</a></h4><h2 id="ファイルストレージ" tabindex="-1">ファイルストレージ <a class="header-anchor" href="#ファイルストレージ" aria-label="Permalink to &quot;ファイルストレージ&quot;">​</a></h2><h3 id="cdn" tabindex="-1">CDN <a class="header-anchor" href="#cdn" aria-label="Permalink to &quot;CDN&quot;">​</a></h3><h4 id="cdn-host" tabindex="-1"><code>CDN_HOST</code> <a class="header-anchor" href="#cdn-host" aria-label="Permalink to &quot;`CDN_HOST`&quot;">​</a></h4><p>静的アセット（ロゴ、絵文字、CSS、JSなど）は、CDN（Content Delivery Network）のような別のホストから提供すると、ユーザーの読み込み時間を短縮することができます。</p><p>値の例: <code>https://assets.example.com</code></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>CORS ヘッダを付けてファイルを提供しなければ、Mastodon の Web UI の一部の機能が動作しません。例えば、<code>Access-Control-Allow-Origin:*</code></p></div><h4 id="s3-alias-host" tabindex="-1"><code>S3_ALIAS_HOST</code> <a class="header-anchor" href="#s3-alias-host" aria-label="Permalink to &quot;`S3_ALIAS_HOST`&quot;">​</a></h4><p><code>CDN_HOST</code> と同様に、別のホストから <em>ユーザーアップロードされた</em> ファイルを提供することができます。実際、Amazon S3、Minio、Google Cloudなどの外部ストレージを使用している場合、デフォルトでこれらのサービスのURLからファイルを提供することになります。</p><p>いくつかの理由から、ご自身のホストを利用されることを強くお勧めします。</p><ol><li>外部ストレージプロバイダーの帯域は従量制で、料金が高い</li><li>古いリンクを壊さずに、後で別のプロバイダに切り替えたい場合</li></ol><p>値の例：<code>files.example.com</code>。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>CORS ヘッダを付けてファイルを提供しなければ、Mastodon の Web UI の一部の機能が動作しません。例えば、<code>Access-Control-Allow-Origin:*</code></p></div><h3 id="ローカルファイルストレージ" tabindex="-1">ローカルファイルストレージ <a class="header-anchor" href="#ローカルファイルストレージ" aria-label="Permalink to &quot;ローカルファイルストレージ&quot;">​</a></h3><h4 id="paperclip-root-path" tabindex="-1"><code>PAPERCLIP_ROOT_PATH</code> <a class="header-anchor" href="#paperclip-root-path" aria-label="Permalink to &quot;`PAPERCLIP_ROOT_PATH`&quot;">​</a></h4><h4 id="paperclip-root-url" tabindex="-1"><code>PAPERCLIP_ROOT_URL</code> <a class="header-anchor" href="#paperclip-root-url" aria-label="Permalink to &quot;`PAPERCLIP_ROOT_URL`&quot;">​</a></h4><h3 id="amazon-s3および互換性のある" tabindex="-1">Amazon S3および互換性のある <a class="header-anchor" href="#amazon-s3および互換性のある" aria-label="Permalink to &quot;Amazon S3および互換性のある&quot;">​</a></h3><h4 id="s3-enabled" tabindex="-1"><code>S3_ENABLED</code> <a class="header-anchor" href="#s3-enabled" aria-label="Permalink to &quot;`S3_ENABLED`&quot;">​</a></h4><h4 id="s3-bucket" tabindex="-1"><code>S3_BUCKET</code> <a class="header-anchor" href="#s3-bucket" aria-label="Permalink to &quot;`S3_BUCKET`&quot;">​</a></h4><h4 id="aws-access-key-id" tabindex="-1"><code>AWS_ACCESS_KEY_ID</code> <a class="header-anchor" href="#aws-access-key-id" aria-label="Permalink to &quot;`AWS_ACCESS_KEY_ID`&quot;">​</a></h4><h4 id="aws-secret-access-key" tabindex="-1"><code>AWS_SECRET_ACCESS_KEY</code> <a class="header-anchor" href="#aws-secret-access-key" aria-label="Permalink to &quot;`AWS_SECRET_ACCESS_KEY`&quot;">​</a></h4><h4 id="s3-region" tabindex="-1"><code>S3_REGION</code> <a class="header-anchor" href="#s3-region" aria-label="Permalink to &quot;`S3_REGION`&quot;">​</a></h4><h4 id="s3-protocol" tabindex="-1"><code>S3_PROTOCOL</code> <a class="header-anchor" href="#s3-protocol" aria-label="Permalink to &quot;`S3_PROTOCOL`&quot;">​</a></h4><h4 id="s3-hostname" tabindex="-1"><code>S3_HOSTNAME</code> <a class="header-anchor" href="#s3-hostname" aria-label="Permalink to &quot;`S3_HOSTNAME`&quot;">​</a></h4><h4 id="s3-endpoint" tabindex="-1"><code>S3_ENDPOINT</code> <a class="header-anchor" href="#s3-endpoint" aria-label="Permalink to &quot;`S3_ENDPOINT`&quot;">​</a></h4><h4 id="s3-signature-version" tabindex="-1"><code>S3_SIGNATURE_VERSION</code> <a class="header-anchor" href="#s3-signature-version" aria-label="Permalink to &quot;`S3_SIGNATURE_VERSION`&quot;">​</a></h4><h4 id="s3-override-path-style" tabindex="-1"><code>S3_OVERRIDE_PATH_STYLE</code> <a class="header-anchor" href="#s3-override-path-style" aria-label="Permalink to &quot;`S3_OVERRIDE_PATH_STYLE`&quot;">​</a></h4><h4 id="s3-open-timeout" tabindex="-1"><code>S3_OPEN_TIMEOUT</code> <a class="header-anchor" href="#s3-open-timeout" aria-label="Permalink to &quot;`S3_OPEN_TIMEOUT`&quot;">​</a></h4><h4 id="s3-read-timeout" tabindex="-1"><code>S3_READ_TIMEOUT</code> <a class="header-anchor" href="#s3-read-timeout" aria-label="Permalink to &quot;`S3_READ_TIMEOUT`&quot;">​</a></h4><h4 id="s3-force-single-request" tabindex="-1"><code>S3_FORCE_SINGLE_REQUEST</code> <a class="header-anchor" href="#s3-force-single-request" aria-label="Permalink to &quot;`S3_FORCE_SINGLE_REQUEST`&quot;">​</a></h4><h3 id="swift" tabindex="-1">Swift <a class="header-anchor" href="#swift" aria-label="Permalink to &quot;Swift&quot;">​</a></h3><h4 id="swift-enabled" tabindex="-1"><code>SWIFT_ENABLED</code> <a class="header-anchor" href="#swift-enabled" aria-label="Permalink to &quot;`SWIFT_ENABLED`&quot;">​</a></h4><h4 id="swift-username" tabindex="-1"><code>SWIFT_USERNAME</code> <a class="header-anchor" href="#swift-username" aria-label="Permalink to &quot;`SWIFT_USERNAME`&quot;">​</a></h4><h4 id="swift-tenant" tabindex="-1"><code>SWIFT_TENANT</code> <a class="header-anchor" href="#swift-tenant" aria-label="Permalink to &quot;`SWIFT_TENANT`&quot;">​</a></h4><h4 id="swift-password" tabindex="-1"><code>SWIFT_PASSWORD</code> <a class="header-anchor" href="#swift-password" aria-label="Permalink to &quot;`SWIFT_PASSWORD`&quot;">​</a></h4><h4 id="swift-project-id" tabindex="-1"><code>SWIFT_PROJECT_ID</code> <a class="header-anchor" href="#swift-project-id" aria-label="Permalink to &quot;`SWIFT_PROJECT_ID`&quot;">​</a></h4><h4 id="swift-auth-url" tabindex="-1"><code>SWIFT_AUTH_URL</code> <a class="header-anchor" href="#swift-auth-url" aria-label="Permalink to &quot;`SWIFT_AUTH_URL`&quot;">​</a></h4><h4 id="swift-container" tabindex="-1"><code>SWIFT_CONTAINER</code> <a class="header-anchor" href="#swift-container" aria-label="Permalink to &quot;`SWIFT_CONTAINER`&quot;">​</a></h4><h4 id="swift-object-url" tabindex="-1"><code>SWIFT_OBJECT_URL</code> <a class="header-anchor" href="#swift-object-url" aria-label="Permalink to &quot;`SWIFT_OBJECT_URL`&quot;">​</a></h4><h4 id="swift-region" tabindex="-1"><code>SWIFT_REGION</code> <a class="header-anchor" href="#swift-region" aria-label="Permalink to &quot;`SWIFT_REGION`&quot;">​</a></h4><h4 id="swift-domain-name" tabindex="-1"><code>SWIFT_DOMAIN_NAME</code> <a class="header-anchor" href="#swift-domain-name" aria-label="Permalink to &quot;`SWIFT_DOMAIN_NAME`&quot;">​</a></h4><h4 id="swift-cache-ttl" tabindex="-1"><code>SWIFT_CACHE_TTL</code> <a class="header-anchor" href="#swift-cache-ttl" aria-label="Permalink to &quot;`SWIFT_CACHE_TTL`&quot;">​</a></h4><h2 id="外部認証" tabindex="-1">外部認証 <a class="header-anchor" href="#外部認証" aria-label="Permalink to &quot;外部認証&quot;">​</a></h2><h3 id="omniauth" tabindex="-1">OmniAuth <a class="header-anchor" href="#omniauth" aria-label="Permalink to &quot;OmniAuth&quot;">​</a></h3><h4 id="omniauth-only" tabindex="-1"><code>OMNIAUTH_ONLY</code> <a class="header-anchor" href="#omniauth-only" aria-label="Permalink to &quot;`OMNIAUTH_ONLY`&quot;">​</a></h4><h3 id="ldap" tabindex="-1">LDAP <a class="header-anchor" href="#ldap" aria-label="Permalink to &quot;LDAP&quot;">​</a></h3><h4 id="ldap-enabled" tabindex="-1"><code>LDAP_ENABLED</code> <a class="header-anchor" href="#ldap-enabled" aria-label="Permalink to &quot;`LDAP_ENABLED`&quot;">​</a></h4><h4 id="ldap-host" tabindex="-1"><code>LDAP_HOST</code> <a class="header-anchor" href="#ldap-host" aria-label="Permalink to &quot;`LDAP_HOST`&quot;">​</a></h4><h4 id="ldap-port" tabindex="-1"><code>LDAP_PORT</code> <a class="header-anchor" href="#ldap-port" aria-label="Permalink to &quot;`LDAP_PORT`&quot;">​</a></h4><h4 id="ldap-method" tabindex="-1"><code>LDAP_METHOD</code> <a class="header-anchor" href="#ldap-method" aria-label="Permalink to &quot;`LDAP_METHOD`&quot;">​</a></h4><h4 id="ldap-base" tabindex="-1"><code>LDAP_BASE</code> <a class="header-anchor" href="#ldap-base" aria-label="Permalink to &quot;`LDAP_BASE`&quot;">​</a></h4><h4 id="ldap-bind-dn" tabindex="-1"><code>LDAP_BIND_DN</code> <a class="header-anchor" href="#ldap-bind-dn" aria-label="Permalink to &quot;`LDAP_BIND_DN`&quot;">​</a></h4><h4 id="ldap-password" tabindex="-1"><code>LDAP_PASSWORD</code> <a class="header-anchor" href="#ldap-password" aria-label="Permalink to &quot;`LDAP_PASSWORD`&quot;">​</a></h4><h4 id="ldap-uid" tabindex="-1"><code>LDAP_UID</code> <a class="header-anchor" href="#ldap-uid" aria-label="Permalink to &quot;`LDAP_UID`&quot;">​</a></h4><h4 id="ldap-search-filter" tabindex="-1"><code>LDAP_SEARCH_FILTER</code> <a class="header-anchor" href="#ldap-search-filter" aria-label="Permalink to &quot;`LDAP_SEARCH_FILTER`&quot;">​</a></h4><h4 id="ldap-mail" tabindex="-1"><code>LDAP_MAIL</code> <a class="header-anchor" href="#ldap-mail" aria-label="Permalink to &quot;`LDAP_MAIL`&quot;">​</a></h4><h4 id="ldap-uid-converstion-enabled" tabindex="-1"><code>LDAP_UID_CONVERSTION_ENABLED</code> <a class="header-anchor" href="#ldap-uid-converstion-enabled" aria-label="Permalink to &quot;`LDAP_UID_CONVERSTION_ENABLED`&quot;">​</a></h4><h3 id="pam" tabindex="-1">PAM <a class="header-anchor" href="#pam" aria-label="Permalink to &quot;PAM&quot;">​</a></h3><h4 id="pam-enabled" tabindex="-1"><code>PAM_ENABLED</code> <a class="header-anchor" href="#pam-enabled" aria-label="Permalink to &quot;`PAM_ENABLED`&quot;">​</a></h4><h4 id="pam-email-domain" tabindex="-1"><code>PAM_EMAIL_DOMAIN</code> <a class="header-anchor" href="#pam-email-domain" aria-label="Permalink to &quot;`PAM_EMAIL_DOMAIN`&quot;">​</a></h4><h4 id="pam-default-service" tabindex="-1"><code>PAM_DEFAULT_SERVICE</code> <a class="header-anchor" href="#pam-default-service" aria-label="Permalink to &quot;`PAM_DEFAULT_SERVICE`&quot;">​</a></h4><h4 id="pam-controlled-service" tabindex="-1"><code>PAM_CONTROLLED_SERVICE</code> <a class="header-anchor" href="#pam-controlled-service" aria-label="Permalink to &quot;`PAM_CONTROLLED_SERVICE`&quot;">​</a></h4><h3 id="cas" tabindex="-1">CAS <a class="header-anchor" href="#cas" aria-label="Permalink to &quot;CAS&quot;">​</a></h3><h4 id="cas-enabled" tabindex="-1"><code>CAS_ENABLED</code> <a class="header-anchor" href="#cas-enabled" aria-label="Permalink to &quot;`CAS_ENABLED`&quot;">​</a></h4><h4 id="cas-display-name" tabindex="-1"><code>CAS_DISPLAY_NAME</code> <a class="header-anchor" href="#cas-display-name" aria-label="Permalink to &quot;`CAS_DISPLAY_NAME`&quot;">​</a></h4><h4 id="cas-url" tabindex="-1"><code>CAS_URL</code> <a class="header-anchor" href="#cas-url" aria-label="Permalink to &quot;`CAS_URL`&quot;">​</a></h4><h4 id="cas-host" tabindex="-1"><code>CAS_HOST</code> <a class="header-anchor" href="#cas-host" aria-label="Permalink to &quot;`CAS_HOST`&quot;">​</a></h4><h4 id="cas-port" tabindex="-1"><code>CAS_PORT</code> <a class="header-anchor" href="#cas-port" aria-label="Permalink to &quot;`CAS_PORT`&quot;">​</a></h4><h4 id="cas-ssl" tabindex="-1"><code>CAS_SSL</code> <a class="header-anchor" href="#cas-ssl" aria-label="Permalink to &quot;`CAS_SSL`&quot;">​</a></h4><h4 id="cas-validate-url" tabindex="-1"><code>CAS_VALIDATE_URL</code> <a class="header-anchor" href="#cas-validate-url" aria-label="Permalink to &quot;`CAS_VALIDATE_URL`&quot;">​</a></h4><h4 id="cas-callback-url" tabindex="-1"><code>CAS_CALLBACK_URL</code> <a class="header-anchor" href="#cas-callback-url" aria-label="Permalink to &quot;`CAS_CALLBACK_URL`&quot;">​</a></h4><h4 id="cas-logout-url" tabindex="-1"><code>CAS_LOGOUT_URL</code> <a class="header-anchor" href="#cas-logout-url" aria-label="Permalink to &quot;`CAS_LOGOUT_URL`&quot;">​</a></h4><h4 id="cas-login-url" tabindex="-1"><code>CAS_LOGIN_URL</code> <a class="header-anchor" href="#cas-login-url" aria-label="Permalink to &quot;`CAS_LOGIN_URL`&quot;">​</a></h4><h4 id="cas-uid-field" tabindex="-1"><code>CAS_UID_FIELD</code> <a class="header-anchor" href="#cas-uid-field" aria-label="Permalink to &quot;`CAS_UID_FIELD`&quot;">​</a></h4><h4 id="cas-ca-path" tabindex="-1"><code>CAS_CA_PATH</code> <a class="header-anchor" href="#cas-ca-path" aria-label="Permalink to &quot;`CAS_CA_PATH`&quot;">​</a></h4><h4 id="cas-disable-ssl-verification" tabindex="-1"><code>CAS_DISABLE_SSL_VERIFICATION</code> <a class="header-anchor" href="#cas-disable-ssl-verification" aria-label="Permalink to &quot;`CAS_DISABLE_SSL_VERIFICATION`&quot;">​</a></h4><h4 id="cas-uid-key" tabindex="-1"><code>CAS_UID_KEY</code> <a class="header-anchor" href="#cas-uid-key" aria-label="Permalink to &quot;`CAS_UID_KEY`&quot;">​</a></h4><h4 id="cas-name-key" tabindex="-1"><code>CAS_NAME_KEY</code> <a class="header-anchor" href="#cas-name-key" aria-label="Permalink to &quot;`CAS_NAME_KEY`&quot;">​</a></h4><h4 id="cas-email-key" tabindex="-1"><code>CAS_EMAIL_KEY</code> <a class="header-anchor" href="#cas-email-key" aria-label="Permalink to &quot;`CAS_EMAIL_KEY`&quot;">​</a></h4><h4 id="cas-nickname-key" tabindex="-1"><code>CAS_NICKNAME_KEY</code> <a class="header-anchor" href="#cas-nickname-key" aria-label="Permalink to &quot;`CAS_NICKNAME_KEY`&quot;">​</a></h4><h4 id="cas-first-name-key" tabindex="-1"><code>CAS_FIRST_NAME_KEY</code> <a class="header-anchor" href="#cas-first-name-key" aria-label="Permalink to &quot;`CAS_FIRST_NAME_KEY`&quot;">​</a></h4><h4 id="cas-last-name-key" tabindex="-1"><code>CAS_LAST_NAME_KEY</code> <a class="header-anchor" href="#cas-last-name-key" aria-label="Permalink to &quot;`CAS_LAST_NAME_KEY`&quot;">​</a></h4><h4 id="cas-location-key" tabindex="-1"><code>CAS_LOCATION_KEY</code> <a class="header-anchor" href="#cas-location-key" aria-label="Permalink to &quot;`CAS_LOCATION_KEY`&quot;">​</a></h4><h4 id="cas-image-key" tabindex="-1"><code>CAS_IMAGE_KEY</code> <a class="header-anchor" href="#cas-image-key" aria-label="Permalink to &quot;`CAS_IMAGE_KEY`&quot;">​</a></h4><h4 id="cas-phone-key" tabindex="-1"><code>CAS_PHONE_KEY</code> <a class="header-anchor" href="#cas-phone-key" aria-label="Permalink to &quot;`CAS_PHONE_KEY`&quot;">​</a></h4><h4 id="cas-security-assume-email-is-verified" tabindex="-1"><code>CAS_SECURITY_ASSUME_EMAIL_IS_VERIFIED</code> <a class="header-anchor" href="#cas-security-assume-email-is-verified" aria-label="Permalink to &quot;`CAS_SECURITY_ASSUME_EMAIL_IS_VERIFIED`&quot;">​</a></h4><h3 id="saml" tabindex="-1">SAML <a class="header-anchor" href="#saml" aria-label="Permalink to &quot;SAML&quot;">​</a></h3><h4 id="saml-enabled" tabindex="-1"><code>SAML_ENABLED</code> <a class="header-anchor" href="#saml-enabled" aria-label="Permalink to &quot;`SAML_ENABLED`&quot;">​</a></h4><h4 id="saml-acs-url" tabindex="-1"><code>SAML_ACS_URL</code> <a class="header-anchor" href="#saml-acs-url" aria-label="Permalink to &quot;`SAML_ACS_URL`&quot;">​</a></h4><h4 id="saml-issuer" tabindex="-1"><code>SAML_ISSUER</code> <a class="header-anchor" href="#saml-issuer" aria-label="Permalink to &quot;`SAML_ISSUER`&quot;">​</a></h4><h4 id="saml-idp-sso-target-url" tabindex="-1"><code>SAML_IDP_SSO_TARGET_URL</code> <a class="header-anchor" href="#saml-idp-sso-target-url" aria-label="Permalink to &quot;`SAML_IDP_SSO_TARGET_URL`&quot;">​</a></h4><h4 id="saml-idp-cert" tabindex="-1"><code>SAML_IDP_CERT</code> <a class="header-anchor" href="#saml-idp-cert" aria-label="Permalink to &quot;`SAML_IDP_CERT`&quot;">​</a></h4><h4 id="saml-idp-cert-fingerprint" tabindex="-1"><code>SAML_IDP_CERT_FINGERPRINT</code> <a class="header-anchor" href="#saml-idp-cert-fingerprint" aria-label="Permalink to &quot;`SAML_IDP_CERT_FINGERPRINT`&quot;">​</a></h4><h4 id="saml-name-identifier-format" tabindex="-1"><code>SAML_NAME_IDENTIFIER_FORMAT</code> <a class="header-anchor" href="#saml-name-identifier-format" aria-label="Permalink to &quot;`SAML_NAME_IDENTIFIER_FORMAT`&quot;">​</a></h4><h4 id="saml-cert" tabindex="-1"><code>SAML_CERT</code> <a class="header-anchor" href="#saml-cert" aria-label="Permalink to &quot;`SAML_CERT`&quot;">​</a></h4><h4 id="saml-private-key" tabindex="-1"><code>SAML_PRIVATE_KEY</code> <a class="header-anchor" href="#saml-private-key" aria-label="Permalink to &quot;`SAML_PRIVATE_KEY`&quot;">​</a></h4><h4 id="saml-security-want-assertion-signed" tabindex="-1"><code>SAML_SECURITY_WANT_ASSERTION_SIGNED</code> <a class="header-anchor" href="#saml-security-want-assertion-signed" aria-label="Permalink to &quot;`SAML_SECURITY_WANT_ASSERTION_SIGNED`&quot;">​</a></h4><h4 id="saml-security-want-assertion-encrypted" tabindex="-1"><code>SAML_SECURITY_WANT_ASSERTION_ENCRYPTED</code> <a class="header-anchor" href="#saml-security-want-assertion-encrypted" aria-label="Permalink to &quot;`SAML_SECURITY_WANT_ASSERTION_ENCRYPTED`&quot;">​</a></h4><h4 id="saml-security-assume-email-is-verified" tabindex="-1"><code>SAML_SECURITY_ASSUME_EMAIL_IS_VERIFIED</code> <a class="header-anchor" href="#saml-security-assume-email-is-verified" aria-label="Permalink to &quot;`SAML_SECURITY_ASSUME_EMAIL_IS_VERIFIED`&quot;">​</a></h4><h4 id="saml-attributes-statements-uid" tabindex="-1"><code>SAML_ATTRIBUTES_STATEMENTS_UID</code> <a class="header-anchor" href="#saml-attributes-statements-uid" aria-label="Permalink to &quot;`SAML_ATTRIBUTES_STATEMENTS_UID`&quot;">​</a></h4><h4 id="saml-attributes-statements-email" tabindex="-1"><code>SAML_ATTRIBUTES_STATEMENTS_EMAIL</code> <a class="header-anchor" href="#saml-attributes-statements-email" aria-label="Permalink to &quot;`SAML_ATTRIBUTES_STATEMENTS_EMAIL`&quot;">​</a></h4><h4 id="saml-attributes-statements-full-name" tabindex="-1"><code>SAML_ATTRIBUTES_STATEMENTS_FULL_NAME</code> <a class="header-anchor" href="#saml-attributes-statements-full-name" aria-label="Permalink to &quot;`SAML_ATTRIBUTES_STATEMENTS_FULL_NAME`&quot;">​</a></h4><h4 id="saml-attributes-statements-first-name" tabindex="-1"><code>SAML_ATTRIBUTES_STATEMENTS_FIRST_NAME</code> <a class="header-anchor" href="#saml-attributes-statements-first-name" aria-label="Permalink to &quot;`SAML_ATTRIBUTES_STATEMENTS_FIRST_NAME`&quot;">​</a></h4><h4 id="saml-attributes-statements-last-name" tabindex="-1"><code>SAML_ATTRIBUTES_STATEMENTS_LAST_NAME</code> <a class="header-anchor" href="#saml-attributes-statements-last-name" aria-label="Permalink to &quot;`SAML_ATTRIBUTES_STATEMENTS_LAST_NAME`&quot;">​</a></h4><h4 id="saml-uid-attribute" tabindex="-1"><code>SAML_UID_ATTRIBUTE</code> <a class="header-anchor" href="#saml-uid-attribute" aria-label="Permalink to &quot;`SAML_UID_ATTRIBUTE`&quot;">​</a></h4><h4 id="saml-attributes-statements-verified" tabindex="-1"><code>SAML_ATTRIBUTES_STATEMENTS_VERIFIED</code> <a class="header-anchor" href="#saml-attributes-statements-verified" aria-label="Permalink to &quot;`SAML_ATTRIBUTES_STATEMENTS_VERIFIED`&quot;">​</a></h4><h4 id="saml-attributes-statements-verified-email" tabindex="-1"><code>SAML_ATTRIBUTES_STATEMENTS_VERIFIED_EMAIL</code> <a class="header-anchor" href="#saml-attributes-statements-verified-email" aria-label="Permalink to &quot;`SAML_ATTRIBUTES_STATEMENTS_VERIFIED_EMAIL`&quot;">​</a></h4><h2 id="隠しサービス" tabindex="-1">隠しサービス <a class="header-anchor" href="#隠しサービス" aria-label="Permalink to &quot;隠しサービス&quot;">​</a></h2><h3 id="tor" tabindex="-1">TOR <a class="header-anchor" href="#tor" aria-label="Permalink to &quot;TOR&quot;">​</a></h3><h4 id="http-proxy" tabindex="-1"><code>http_proxy</code> <a class="header-anchor" href="#http-proxy" aria-label="Permalink to &quot;`http_proxy`&quot;">​</a></h4><h4 id="http-hidden-proxy" tabindex="-1"><code>http_hidden_proxy</code> <a class="header-anchor" href="#http-hidden-proxy" aria-label="Permalink to &quot;`http_hidden_proxy`&quot;">​</a></h4><h4 id="allow-access-to-hidden-service" tabindex="-1"><code>ALLOW_ACCESS_TO_HIDDEN_SERVICE</code> <a class="header-anchor" href="#allow-access-to-hidden-service" aria-label="Permalink to &quot;`ALLOW_ACCESS_TO_HIDDEN_SERVICE`&quot;">​</a></h4><h2 id="制限事項" tabindex="-1">制限事項 <a class="header-anchor" href="#制限事項" aria-label="Permalink to &quot;制限事項&quot;">​</a></h2><h3 id="メールドメイン" tabindex="-1">メールドメイン <a class="header-anchor" href="#メールドメイン" aria-label="Permalink to &quot;メールドメイン&quot;">​</a></h3><h4 id="email-domain-allowlist" tabindex="-1"><code>EMAIL_DOMAIN_ALLOWLIST</code> <a class="header-anchor" href="#email-domain-allowlist" aria-label="Permalink to &quot;`EMAIL_DOMAIN_ALLOWLIST`&quot;">​</a></h4><p>設定された場合、指定されたドメインからのメール以外では登録ができなくなります。パイプで区切られた値、例:<code>foo.com|bar.com</code> のようになります。</p><h4 id="email-domain-denylist" tabindex="-1"><code>EMAIL_DOMAIN_DENYLIST</code> <a class="header-anchor" href="#email-domain-denylist" aria-label="Permalink to &quot;`EMAIL_DOMAIN_DENYLIST`&quot;">​</a></h4><p>設定された場合、指定されたドメインからの電子メールでは登録ができなくなります。パイプで区切られた値、例:例：<code>foo.com|bar.com</code>。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>このオプションは非推奨です。管理画面または <code>tootctl</code> コマンドラインインタフェースから、電子メールのドメインを動的にブロックすることができます。</p></div><h3 id="セッション" tabindex="-1">セッション <a class="header-anchor" href="#セッション" aria-label="Permalink to &quot;セッション&quot;">​</a></h3><h4 id="max-session-activations" tabindex="-1"><code>MAX_SESSION_ACTIVATIONS</code> <a class="header-anchor" href="#max-session-activations" aria-label="Permalink to &quot;`MAX_SESSION_ACTIVATIONS`&quot;">​</a></h4><p>ユーザーごとに許可されるブラウザセッションの数を指定します。デフォルトは <code>10</code> です。新しいブラウザセッションが作成された場合、最も古いセッションは削除されます（例: そのブラウザのユーザーはログアウトされます）。</p><h3 id="home-feeds" tabindex="-1">Home feeds <a class="header-anchor" href="#home-feeds" aria-label="Permalink to &quot;Home feeds&quot;">​</a></h3><h4 id="user-active-days" tabindex="-1"><code>USER_ACTIVE_DAYS</code> <a class="header-anchor" href="#user-active-days" aria-label="Permalink to &quot;`USER_ACTIVE_DAYS`&quot;">​</a></h4><p>Mastodon はホームフィードを RAM (具体的には Redis データベース) に保存します。そのため、アクセスや更新は非常に高速に行えますが、使われないのにそこに置いておくのは好ましくありませんし、アクセスされない新しいアイテムをホームフィードに挿入するためにリソースを使いたくありません。そのため、Mastodonでは、しばらくオンラインになっていないユーザーのホームフィードを定期的に消去し、再び現れたらデータベースのデータからそのホームフィードを再生成するようにしています。デフォルトでは、過去7日間にオンラインであったユーザはアクティブとみなされます。</p><p>ホームフィードの再生成は計算コストがかかります。もしSidekiqが、ユーザーが3日ごとにオンラインになるにもかかわらず、<code>USER_ACTIVE_DAYS</code>が2に設定されているために常にそれを行っているなら、それを調整することを検討してみてください。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>この設定は、月間アクティブユーザー数などの統計上、どのユーザーをアクティブと見なすかとは関係ありません。</p></div><h2 id="その他" tabindex="-1">その他 <a class="header-anchor" href="#その他" aria-label="Permalink to &quot;その他&quot;">​</a></h2><h3 id="dbマイグレーション" tabindex="-1">DBマイグレーション <a class="header-anchor" href="#dbマイグレーション" aria-label="Permalink to &quot;DBマイグレーション&quot;">​</a></h3><h4 id="skip-post-deployment-migrations" tabindex="-1"><code>SKIP_POST_DEPLOYMENT_MIGRATIONS</code> <a class="header-anchor" href="#skip-post-deployment-migrations" aria-label="Permalink to &quot;`SKIP_POST_DEPLOYMENT_MIGRATIONS`&quot;">​</a></h4><p>この変数は <code>rake db:migrate</code> を実行したときのみ効果を発揮し、Mastodon のアップグレード処理に極めて特有なものです。データベースのマイグレーションには、新しいコードがデプロイされて実行される前に実行されるものと、実行された後に実行されるものの 2 種類があります。デフォルトでは、両方のタイプのマイグレーションが実行されます。もし、マイグレーションを実行する前にすべての Mastodon プロセスをシャットダウンすれば、何の違いもありません。この変数は、ゼロダウンタイムのアップグレードのために意味をなします。この変数が必要かどうかは、特定の Mastodon バージョンのアップグレードの説明書をご覧ください。</p><h3 id="未分類または未分類のもの" tabindex="-1">未分類または未分類のもの <a class="header-anchor" href="#未分類または未分類のもの" aria-label="Permalink to &quot;未分類または未分類のもの&quot;">​</a></h3><h4 id="bundle-gemfile" tabindex="-1"><code>BUNDLE_GEMFILE</code> <a class="header-anchor" href="#bundle-gemfile" aria-label="Permalink to &quot;`BUNDLE_GEMFILE`&quot;">​</a></h4><h4 id="deepl-api-key" tabindex="-1"><code>DEEPL_API_KEY</code> <a class="header-anchor" href="#deepl-api-key" aria-label="Permalink to &quot;`DEEPL_API_KEY`&quot;">​</a></h4><h4 id="deepl-plan" tabindex="-1"><code>DEEPL_PLAN</code> <a class="header-anchor" href="#deepl-plan" aria-label="Permalink to &quot;`DEEPL_PLAN`&quot;">​</a></h4><h4 id="libre-translate-endpoint" tabindex="-1"><code>LIBRE_TRANSLATE_ENDPOINT</code> <a class="header-anchor" href="#libre-translate-endpoint" aria-label="Permalink to &quot;`LIBRE_TRANSLATE_ENDPOINT`&quot;">​</a></h4><h4 id="libre-translate-api-key" tabindex="-1"><code>LIBRE_TRANSLATE_API_KEY</code> <a class="header-anchor" href="#libre-translate-api-key" aria-label="Permalink to &quot;`LIBRE_TRANSLATE_API_KEY`&quot;">​</a></h4><h4 id="cache-buster-enabled" tabindex="-1"><code>CACHE_BUSTER_ENABLED</code> <a class="header-anchor" href="#cache-buster-enabled" aria-label="Permalink to &quot;`CACHE_BUSTER_ENABLED`&quot;">​</a></h4><h4 id="cache-buster-secret-header" tabindex="-1"><code>CACHE_BUSTER_SECRET_HEADER</code> <a class="header-anchor" href="#cache-buster-secret-header" aria-label="Permalink to &quot;`CACHE_BUSTER_SECRET_HEADER`&quot;">​</a></h4><h4 id="cache-buster-secret" tabindex="-1"><code>CACHE_BUSTER_SECRET</code> <a class="header-anchor" href="#cache-buster-secret" aria-label="Permalink to &quot;`CACHE_BUSTER_SECRET`&quot;">​</a></h4><h4 id="github-repository" tabindex="-1"><code>GITHUB_REPOSITORY</code> <a class="header-anchor" href="#github-repository" aria-label="Permalink to &quot;`GITHUB_REPOSITORY`&quot;">​</a></h4><p>デフォルトは <code>mastodon/mastodon</code> です。</p><h4 id="source-base-url" tabindex="-1"><code>SOURCE_BASE_URL</code> <a class="header-anchor" href="#source-base-url" aria-label="Permalink to &quot;`SOURCE_BASE_URL`&quot;">​</a></h4><p>デフォルトは <code>https://github.com/$GITHUB_REPOSITORY</code> です。</p><h4 id="ffmpeg-binary" tabindex="-1"><code>FFMPEG_BINARY</code> <a class="header-anchor" href="#ffmpeg-binary" aria-label="Permalink to &quot;`FFMPEG_BINARY`&quot;">​</a></h4><h4 id="local-https" tabindex="-1"><code>LOCAL_HTTPS</code> <a class="header-anchor" href="#local-https" aria-label="Permalink to &quot;`LOCAL_HTTPS`&quot;">​</a></h4><h4 id="path" tabindex="-1"><code>PATH</code> <a class="header-anchor" href="#path" aria-label="Permalink to &quot;`PATH`&quot;">​</a></h4><h4 id="max-follows-threshold" tabindex="-1"><code>MAX_FOLLOWS_THRESHOLD</code> <a class="header-anchor" href="#max-follows-threshold" aria-label="Permalink to &quot;`MAX_FOLLOWS_THRESHOLD`&quot;">​</a></h4><p>デフォルトは <code>7500</code> です。</p><h4 id="max-follows-ratio" tabindex="-1"><code>MAX_FOLLOWS_RATIO</code> <a class="header-anchor" href="#max-follows-ratio" aria-label="Permalink to &quot;`MAX_FOLLOWS_RATIO`&quot;">​</a></h4><p>デフォルトは <code>1.1</code> です。</p><h4 id="ip-retention-period" tabindex="-1"><code>IP_RETENTION_PERIOD</code> <a class="header-anchor" href="#ip-retention-period" aria-label="Permalink to &quot;`IP_RETENTION_PERIOD`&quot;">​</a></h4><p>デフォルトは <code>31536000</code> (1年)</p><h4 id="session-retention-period" tabindex="-1"><code>SESSION_RETENTION_PERIOD</code> <a class="header-anchor" href="#session-retention-period" aria-label="Permalink to &quot;`SESSION_RETENTION_PERIOD`&quot;">​</a></h4><p>デフォルトは <code>31536000</code> (1年)</p><h4 id="backtrace" tabindex="-1"><code>BACKTRACE</code> <a class="header-anchor" href="#backtrace" aria-label="Permalink to &quot;`BACKTRACE`&quot;">​</a></h4><p>1` に設定すると、Rails フレームワークのコードへのバックトラックが可能になります。</p><h4 id="disable-simplecov" tabindex="-1"><code>DISABLE_SIMPLECOV</code> <a class="header-anchor" href="#disable-simplecov" aria-label="Permalink to &quot;`DISABLE_SIMPLECOV`&quot;">​</a></h4><h4 id="email-domain-lists-apply-after-confirmation" tabindex="-1"><code>EMAIL_DOMAIN_LISTS_APPLY_AFTER_CONFIRMATION</code> <a class="header-anchor" href="#email-domain-lists-apply-after-confirmation" aria-label="Permalink to &quot;`EMAIL_DOMAIN_LISTS_APPLY_AFTER_CONFIRMATION`&quot;">​</a></h4><h4 id="disable-followers-synchronization" tabindex="-1"><code>DISABLE_FOLLOWERS_SYNCHRONIZATION</code> <a class="header-anchor" href="#disable-followers-synchronization" aria-label="Permalink to &quot;`DISABLE_FOLLOWERS_SYNCHRONIZATION`&quot;">​</a></h4><h4 id="max-request-pool-size" tabindex="-1"><code>MAX_REQUEST_POOL_SIZE</code> <a class="header-anchor" href="#max-request-pool-size" aria-label="Permalink to &quot;`MAX_REQUEST_POOL_SIZE`&quot;">​</a></h4><p>デフォルトは <code>512</code> である。</p><h4 id="github-api-token" tabindex="-1"><code>GITHUB_API_TOKEN</code> <a class="header-anchor" href="#github-api-token" aria-label="Permalink to &quot;`GITHUB_API_TOKEN`&quot;">​</a></h4><p>Github のコミット履歴から AUTHORS.md を生成するための rake タスクで使用します。</p>',327),l=[t];function c(r,s,h,n,_,u){return o(),e("div",null,l)}const b=a(i,[["render",c]]);export{S as __pageData,b as default};
