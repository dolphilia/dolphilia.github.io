import{_ as a,c as p,o as i,a4 as e}from"./chunks/framework.C5O6QHj3.js";const b=JSON.parse('{"title":"pixiv小説の本文検索終了について考える","description":"","frontmatter":{},"headers":[],"relativePath":"essay/pixiv-shousetsu-no-honbun.md","filePath":"essay/pixiv-shousetsu-no-honbun.md","lastUpdated":1676126774000}'),t={name:"essay/pixiv-shousetsu-no-honbun.md"},o=e('<h1 id="pixiv小説の本文検索終了について考える" tabindex="-1">pixiv小説の本文検索終了について考える <a class="header-anchor" href="#pixiv小説の本文検索終了について考える" aria-label="Permalink to &quot;pixiv小説の本文検索終了について考える&quot;">​</a></h1><p>2021年9月16日のpixivからのお知らせで小説の本文検索が終了することが発表されました。この件はTwitterでトレンドにもなり、たくさんの利用者の関心を集めました。</p><h2 id="大きな波紋となった理由" tabindex="-1">大きな波紋となった理由 <a class="header-anchor" href="#大きな波紋となった理由" aria-label="Permalink to &quot;大きな波紋となった理由&quot;">​</a></h2><p>これほど多くの利用者が反応した一番の要因は、本文検索機能が重要な役割を果たしていたからです。膨大な量の小説を掻き分けて、目的のものにたどり着くために、本文検索機能が必要になることがありました。</p><p>この機能が無くなることは、明らかにより良いユーザー体験を損ないます。膨大な情報に対して検索機能を設けることは、ウェブの世界では必須のものとされているからです。例えばユーザビリティの専門家であるニールセン博士も検索ツールは不可欠だとしています。</p><p>それと同時に、お知らせの内容に書かれた情報の断片から、小説を描く側と読む側のそれぞれの反応を引き出しました。</p><h2 id="お知らせで注目するべき箇所" tabindex="-1">お知らせで注目するべき箇所 <a class="header-anchor" href="#お知らせで注目するべき箇所" aria-label="Permalink to &quot;お知らせで注目するべき箇所&quot;">​</a></h2><p>数字は多くの反応を引き起こします。具体的な数字を出すことは説得力を持たせるためのプレゼンテーションの鉄板です。</p><p>投稿された小説の文字数が『700億文字』あるという事実は読者に確かにインパクトを与えました。一般的な小説一冊の文字数を10万字と概算しても、70万冊分にもなります。これは大きめの図書館の蔵書数に匹敵する量です。</p><p>とはいえ、お知らせで最も重要な箇所は『検索結果で発生する問題についてはこれまでも多くのお問合せをいただいており、負荷解消に取り組んで参りましたが、根本的な問題が解決されず、やむなく機能の提供終了という判断に至りました。』という部分です。</p><p>この中でも特に『根本的な問題が解決されず』という部分に注目しましょう。</p><h2 id="検索について考える" tabindex="-1">検索について考える <a class="header-anchor" href="#検索について考える" aria-label="Permalink to &quot;検索について考える&quot;">​</a></h2><p>Pixivが抱える本文検索の根本的な問題については推測の域を出ませんが、一般的な検索ツールについて考えると、どんな問題があるのか類推することができます。</p><p>本文検索は文字列をキーワードとして複数の小説から該当するものを探す機能であり、コンピューター用語の全文検索とほぼ同じ意味と捉えることができます。</p><p>検索はコンピューターの基本的かつ重要な機能であり、多くの優秀なエンジニアが開発に勤しんできました。Googleの検索エンジンやUnixコマンドのgrepがその一例です。</p><h2 id="検索とは何か" tabindex="-1">検索とは何か <a class="header-anchor" href="#検索とは何か" aria-label="Permalink to &quot;検索とは何か&quot;">​</a></h2><p>では検索とはいったい何でしょうか。極めて原始的な言い方をすると検索は比較の連続です。キーワードと同じ文字があるのか、片っ端から比較していくのです。</p><p>とはいえ、愚直に比較を続けるだけでは処理数が膨大になってしまうので、効率的に検索ができるように様々な工夫を施します。</p><p>検索とはそのような工夫を駆使して、より早くより効率的に目的のものにたどり着けるようにする技術力の結晶とも言えます。</p><h2 id="検索のプロセス" tabindex="-1">検索のプロセス <a class="header-anchor" href="#検索のプロセス" aria-label="Permalink to &quot;検索のプロセス&quot;">​</a></h2><p>検索は検索する前から始まっています。検索するたびに文章全体を精査するのでは効率が良くありません。そこであらかじめ効率の良いデータベースを作っておくのです。</p><p>どのようなデータベースが作られるのでしょうか。例えば、よく検索される語句の検索結果をあらかじめ用意しておくことができます。定期的に作成する必要がありますが、検索結果は一瞬で出すことができます。</p><p>他の例として、文章の品詞を抜き出して、頻出順に並べ替えをしておくなどします。このデータベースを使うと関連度による重み付けができるようになります。</p><p>そのデータベースはどのように作られるのでしょうか。一つの方法は形態素解析を用いることです。形態素解析エンジンは品詞を分けることができる便利なツールです。</p><h2 id="小説のより良いデータベースとは" tabindex="-1">小説のより良いデータベースとは <a class="header-anchor" href="#小説のより良いデータベースとは" aria-label="Permalink to &quot;小説のより良いデータベースとは&quot;">​</a></h2><p>ところで検索に適した小説のデータベースを作りたい場合、どんな設計にすれば良いのでしょうか。それは蔵書数にもよりますし、話のジャンルにもよります。</p><p>小説は造語や口語、俗語なども許容されますので、文章から効率の良いデータベースを作成するのは一筋縄ではいきません。前述の形態素解析も手を焼くことでしょう。</p><p>最終的に全ての文章を検索できなければ意味がないのですから、あまりに膨大な量の文章があるのでもないかぎり、テキストをそのままデータとして使うことを考え始めるでしょう。</p><h2 id="検索スピードの限界" tabindex="-1">検索スピードの限界 <a class="header-anchor" href="#検索スピードの限界" aria-label="Permalink to &quot;検索スピードの限界&quot;">​</a></h2><p>使用する検索プログラムによって、驚くほどスピードに差が出ます。単純なプログラム、例えば一文字ずつずらしてキーワードと比較していく検索と、正規表現として知られる複雑な検索では完了までの速さが全く違います。</p><p>正規表現は非常に強力ですが、膨大な量の検索には時間がかかるため向きません。一方、単純な検索プログラムは早いですが、必要な機能がない可能性が高く、そして重要な点ですが、それでもなお速さに限界があります。</p><p>ある研究調査によると、ウェブページの応答時間が数秒でも遅延すると利用者は不愉快に感じ、10秒を過ぎると離脱してしまいます。この結果を検索に適用すると、検索結果は少なくとも10秒以内に表示されるべきと言うことができるでしょう。</p><p>それでは、どうすれば膨大な文章の検索結果を10秒以内に提示することができるでしょうか。これは難題です。</p><p>もし検索機能を実装しようと思う場合、許可されたオープンソースから既存の検索ツールを取り入れて、必要に応じて調整をするというような方法を取ると思いますが、機能と速さの最適解を見つけるのは容易ではありません。</p><h2 id="ウェブでの検索の問題" tabindex="-1">ウェブでの検索の問題 <a class="header-anchor" href="#ウェブでの検索の問題" aria-label="Permalink to &quot;ウェブでの検索の問題&quot;">​</a></h2><p>ウェブ上で何かを検索する場合、それは自分のコンピューターで検索するのとは勝手が違います。ローカルのコンピューターであれば、それだけで完結しますが、ウェブでは複数の要素が複雑に絡み合います。</p><p>まず利用者が検索ボックスにキーワードを入力して、送信します。送信データはサーバーに送られます。サーバーはその語句をもとに、データベースにアクセスします。データベースへのアクセスは基本的にサーバーの仕事ですので、その間の仕事はサーバーが負担しなければなりません。</p><p>当然のことですが、利用者は一人ではありません。複数の人が同時に検索をリクエストすることは頻繁に生じます。もちろん、よく使われるサーバーやデータベースのシステムはそれに対応できるように作られていますが、それでも多くの応答があることをサーバーの管理者は考慮する必要があります。</p><p>複雑な要素が絡み合うとまるで累乗するかのように難しくなっていきます。修理ではどうしようもなくなる場合もあります。単純なラジオなら修理できても、スマホの修理はメーカーでも対応できない場合があるのと同じです。</p><p>一番良いのはシステムを作る前の段階で、入念に設計することです。手のつけようのなくなったのなら、一から作り直すという苦渋の決断をする場合もあるでしょう。</p><h2 id="一般的なウェブサイトの検索の変遷" tabindex="-1">一般的なウェブサイトの検索の変遷 <a class="header-anchor" href="#一般的なウェブサイトの検索の変遷" aria-label="Permalink to &quot;一般的なウェブサイトの検索の変遷&quot;">​</a></h2><p>賢明なエンジニアがウェブサイトを作る場合、むやみに検索機能をつけることはしません。検索機能は魅力的ですが、コンテンツが充実していない段階で検索機能を実装してもあまり役に立たないからです。</p><p>コンテンツが充実してきてからは検索機能が力を発揮します。多くの場合、この段階で検索機能が設けられることでしょう。機能も最初はシンプルに、徐々に豊富になっていきます。</p><p>例えば最初はコンテンツのタイトル検索、次いでタグやカテゴリーの検索、全文検索といった具合です。加えて、複数の単語から探すAND検索やOR検索などを実装し始めるかもしれません。</p><p>やがてコンテンツが膨大になってくると、検索結果が出るまで時間がかかるようになってきます。個人の開発者であればサイト内蔵の検索ツールを諦め、Googleなどの検索機能に委ねることも視野に入れ始めます。</p><h2 id="根本的な問題を探る" tabindex="-1">根本的な問題を探る <a class="header-anchor" href="#根本的な問題を探る" aria-label="Permalink to &quot;根本的な問題を探る&quot;">​</a></h2><p>これまでの論考をもとに、Pixiv小説の本文検索の根本的な問題について推測してみましょう。</p><p>Pixivはイラストコミュニケーションサイトとして登場しました。小説の投稿も比較的早い段階に作られましたが、小説を盛り上げようとPixivが活発に動き始めたのは比較的最近のことです。</p><p>作品数がまだ少ない時期は多少の問題はあっても、本文検索は正常に機能していたでしょう。しかし投稿数が増え、利用者が増えるにつれて新たな問題が発生し、より顕著になっていきます。</p><p>本文検索システムは次第に、現状に適さないものになっていき、これをその都度修理しながら使うことは、割りに合わなくなっていきます。システム開発において古いプログラムのメンテナンスは想像以上に大変なのです。</p><p>増え続ける作品に対して、十分に対応できる検索システムにならなければ、根本的な問題を解決したとは言えません。</p><p>上に記したストーリーはあくまで私の推測です。</p><h2 id="本文検索は復活するか" tabindex="-1">本文検索は復活するか <a class="header-anchor" href="#本文検索は復活するか" aria-label="Permalink to &quot;本文検索は復活するか&quot;">​</a></h2><p>本文検索機能を惜しむ声がちらほらと見受けられます。では、本文検索の復活はありうるのでしょうか。</p><p>現状のまま復活する可能性は低いでしょう。</p><p>可能性としてあり得るのは、データベース等を新しくした上で再設計したものを新機能としてリリースする、という形です。</p><p>ただ、pixiv小説がpixivに包含されている状態が継続されるのであれば、pixiv全体の調整が必要になってくるので、やろうと思っても長い時間がかかることでしょう。</p><p>あるいはpixivSketchのようにいわばpixiv小説が独立したサービスとなる未来があるのなら、開発者は本文検索も機能の一つとして検討するだろうとは思います。</p><p>利用者の声が届くかどうかは、中の人しか知り得ないことですが、届く可能性はその声の数でいくらか増すことがあります。たくさんの人が望んでいるという事実があるのなら、それだけで大きな影響力があるのです。</p><p>今回の一件では、本文検索を重宝していたという利用者が少なからずいたことを浮き彫りにしました。この事実は変わらないので、復活するかどうかは別として、何らかの影響を与えたのは間違いないでしょう。</p><h2 id="最近のpixiv小説は面白い" tabindex="-1">最近のpixiv小説は面白い <a class="header-anchor" href="#最近のpixiv小説は面白い" aria-label="Permalink to &quot;最近のpixiv小説は面白い&quot;">​</a></h2><p>本文検索が終了したことは、ネガティブな要素しかないというわけではありません。これはpixivがpixiv小説と向き合っていることの証拠でもあるからです。問題を放置することもできたはずですから。</p><p>事実、最近のpixiv小説は面白くなってきています。頻繁に利用されている方はお気づきと思いますが、目立つところでは小説関係の企画が増え、目立たないところではユーザー体験の向上につながる細かな変更がなされています。</p><p>それも単にコンテスト等を開催するというのではなく、利用者の目線で考え、盛り上げようとしています。それが成功しているかどうかは各自が判断するところですが、私は個人的にも投稿数の推移などからも、面白くなってきていると感じています。</p><p>このような現状を知っているので、私個人としては本文検索が終了したことを前向きに捉えています。pixiv小説をより楽しい場所にするために決断したように思えるからです。</p><h2 id="まとめ" tabindex="-1">まとめ <a class="header-anchor" href="#まとめ" aria-label="Permalink to &quot;まとめ&quot;">​</a></h2><p>この記事ではPixiv小説が本文検索を終了したことについて、検索について掘り下げて考えました。</p><p>検索というもの自体が複雑なプロセスで成り立っていることや、ウェブサービスの成長に合わせて検索も変わっていきメンテナンスが困難になることを記しました。</p><p>また根本的な問題について考え、終了に至った経緯を推測しました。また復活の可能性や、pixiv小説の現状についても書きました。</p><p>すでに述べた通り、私自身は今回のおしらせを前向きに捉えています。</p><p>pixiv小説は全体として良い方向に向かっていますし、今回の決定も全体として良い影響があると思うからです。</p><p>それでは小説が好きな皆様、書く方も読む方も、引き続き小説を楽しんでいきましょう。</p>',72),r=[o];function h(n,l,s,d,c,x){return i(),p("div",null,r)}const v=a(t,[["render",h]]);export{b as __pageData,v as default};
