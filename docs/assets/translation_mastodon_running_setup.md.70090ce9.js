import{_ as e,c as a,o as t,a as s}from"./app.e18c80f2.js";const g=JSON.parse('{"title":"新しいインスタンスのセットアップ","description":"","frontmatter":{},"headers":[{"level":2,"title":"管理者アカウントの作成","slug":"管理者アカウントの作成","link":"#管理者アカウントの作成","children":[{"level":3,"title":"ブラウザで","slug":"ブラウザで","link":"#ブラウザで","children":[]},{"level":3,"title":"コマンドラインから","slug":"コマンドラインから","link":"#コマンドラインから","children":[]}]},{"level":2,"title":"サーバー情報の入力","slug":"サーバー情報の入力","link":"#サーバー情報の入力","children":[]},{"level":2,"title":"定期的なクリーンアップタスクの実行","slug":"定期的なクリーンアップタスクの実行","link":"#定期的なクリーンアップタスクの実行","children":[]}],"relativePath":"translation/mastodon/running/setup.md","lastUpdated":null}'),n={name:"translation/mastodon/running/setup.md"},l=s(`<h1 id="新しいインスタンスのセットアップ" tabindex="-1">新しいインスタンスのセットアップ <a class="header-anchor" href="#新しいインスタンスのセットアップ" aria-hidden="true">#</a></h1><p>Mastodonインストール後に行うこと</p><nav class="table-of-contents"><ul><li><a href="#管理者アカウントの作成">管理者アカウントの作成</a><ul><li><a href="#ブラウザで">ブラウザで</a></li><li><a href="#コマンドラインから">コマンドラインから</a></li></ul></li><li><a href="#サーバー情報の入力">サーバー情報の入力</a></li><li><a href="#定期的なクリーンアップタスクの実行">定期的なクリーンアップタスクの実行</a></li></ul></nav><h2 id="管理者アカウントの作成" tabindex="-1">管理者アカウントの作成 <a class="header-anchor" href="#管理者アカウントの作成" aria-hidden="true">#</a></h2><h3 id="ブラウザで" tabindex="-1">ブラウザで <a class="header-anchor" href="#ブラウザで" aria-hidden="true">#</a></h3><p>ブラウザでサインアップした後、コマンドラインを使用して新しく作成したアカウントに管理者権限を与える必要があります。あなたのユーザー名が <code>alice</code> であると仮定して。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">RAILS_ENV</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">production</span><span style="color:#A6ACCD;"> bin/tootctl accounts modify alice --role Owner</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Mastodon 4.0 以前では、ロールは <code>user</code>, <code>moderator</code>, <code>admin</code> のいずれかであるとハードコードされていた。Mastodon 4.0 以降では、ロールシステムをカスタマイズできるようになった。デフォルトのロールは <code>Moderator</code>, <code>Admin</code>, <code>Owner</code> である。カスタムロールの名前は大文字と小文字が区別される。</p></div><h3 id="コマンドラインから" tabindex="-1">コマンドラインから <a class="header-anchor" href="#コマンドラインから" aria-hidden="true">#</a></h3><p>コマンドラインインターフェイスを使用して、新しいアカウントを作成することができます。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">RAILS_ENV</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">production</span><span style="color:#A6ACCD;"> bin/tootctl accounts create \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">alice</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">--email</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">alice@example.com</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">--confirmed</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">--role</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Owner</span></span>
<span class="line"></span></code></pre></div><p>ランダムに生成されたパスワードが端末に表示されます。</p><h2 id="サーバー情報の入力" tabindex="-1">サーバー情報の入力 <a class="header-anchor" href="#サーバー情報の入力" aria-hidden="true">#</a></h2><p>ログイン後、<strong>サイト設定</strong>ページ（<strong>設定</strong> -&gt; <strong>管理</strong>）に移動します。この情報を記入することに技術的な要件はありませんが、人間用のサーバーを運用する上で重要であると考えられています。</p><table><thead><tr><th style="text-align:left;">Setting</th><th style="text-align:left;">Meaning</th></tr></thead><tbody><tr><td style="text-align:left;">お問い合わせユーザー名</td><td style="text-align:left;">ユーザー名（誰がサーバーを所有しているかが分かるように</td></tr><tr><td style="text-align:left;">ビジネスメール</td><td style="text-align:left;">アカウントからロックアウトされた人、またはアカウントを持たない人が連絡できるようにするための電子メールアドレス</td></tr><tr><td style="text-align:left;">インスタンスの説明</td><td style="text-align:left;">なぜこのサーバーを立ち上げたのですか？誰のためのものですか？何が違うのでしょうか？</td></tr><tr><td style="text-align:left;">カスタム拡張情報</td><td style="text-align:left;">ここにいろいろな情報を入れることができますが、<strong>行動規範</strong>を推奨します。</td></tr></tbody></table><p>入力後、「変更を保存する」をクリックします。</p><h2 id="定期的なクリーンアップタスクの実行" tabindex="-1">定期的なクリーンアップタスクの実行 <a class="header-anchor" href="#定期的なクリーンアップタスクの実行" aria-hidden="true">#</a></h2><p>Mastodonは一時ファイルを生成するので、一定時間が経過するとクリーンアップする価値があります（例：ホスティングの費用を節約するため）。一般的には、これらの定期的なクリーンアップ作業を実行するために <code>cron</code> ジョブ（または別のメカニズム）をセットアップすることをお勧めします。</p><p>通常、<a href="https://docs.joinmastodon.org/admin/tootctl/#media" target="_blank" rel="noreferrer"><code>tootctl media remove</code></a> と <a href="https://docs.joinmastodon.org/admin/tootctl/#preview_cards" target="_blank" rel="noreferrer"><code>tootctl preview_cards remove</code></a> を定期的に実行したいものです。これらはリモートメディア(画像、ビデオ、オーディオなど)とプレビューカード(リンク用プレビュー画像など)を一定の日数が経過した後にクリーンアップします。(クリーンアップするまでの期間を調整したい場合は、これらのコマンドのドキュメントを確認してください)。</p><p>まず、<code>crontab -e</code> を実行して、<code>mastodon</code> ユーザの cronfile を編集してください。(どのエディタを使うか聞かれたら、好きなエディタを選んでください)。</p><p>次に、ファイルの一番下に、以下のようなものを追加します。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">@weekly RAILS_ENV=production /home/mastodon/live/bin/tootctl media remove</span></span>
<span class="line"><span style="color:#A6ACCD;">@weekly RAILS_ENV=production /home/mastodon/live/bin/tootctl preview_cards remove</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>これにより、この2つのコマンドが週単位で実行されます。</p><p>最後に、ファイルを保存します。設定を確認するには、<code>crontab -l</code> を使用します。</p>`,24),o=[l];function r(c,p,d,i,h,C){return t(),a("div",null,o)}const u=e(n,[["render",r]]);export{g as __pageData,u as default};
